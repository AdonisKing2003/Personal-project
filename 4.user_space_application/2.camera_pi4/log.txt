adonisking@adonisking-Nitro-AN515-55:~$ ssh root@10.42.0.154

WARNING: Poky is a reference Yocto Project distribution that should be used for
testing and development purposes only. It is recommended that you create your
own distribution for production use.

root@raspberrypi4-64:~# 
root@raspberrypi4-64:~# 
root@raspberrypi4-64:~# cd ~/workspace/
root@raspberrypi4-64:~/workspace# ls
camera_test  frame_001.yuv  test.jpg  test_image.jpg  test_video.yuv
root@raspberrypi4-64:~/workspace# ls
camera_test	   test.jpg	   test_wrapper_basic	  test_wrapper_stress
frame_001.yuv	   test_image.jpg  test_wrapper_controls
sample_camera_app  test_video.yuv  test_wrapper_formats
root@raspberrypi4-64:~/workspace# ./test_wrapper_basic 
./test_wrapper_basic: error while loading shared libraries: librpi_camera_wrapper.so: cannot open shared object file: No such file or directory
root@raspberrypi4-64:~/workspace# ls
camera_test		  test.jpg	      test_wrapper_controls
frame_001.yuv		  test_image.jpg      test_wrapper_formats
librpi_camera_wrapper.so  test_video.yuv      test_wrapper_stress
sample_camera_app	  test_wrapper_basic
root@raspberrypi4-64:~/workspace# ls -lah
total 28M
drwxr-xr-x 2 root root 4.0K Jan 13 16:24 .
drwx------ 4 root root 4.0K Jan 11 17:01 ..
-rwxr-xr-x 1 root root 102K Jan 11 17:00 camera_test
-rw-r--r-- 1 root root 450K Jan 11 17:11 frame_001.yuv
-rwxr-xr-x 1 root root 968K Jan 13 16:24 librpi_camera_wrapper.so
-rwxr-xr-x 1 root root 109K Jan 13 16:24 sample_camera_app
-rw-r--r-- 1 root root 1.2M Jan  6 16:09 test.jpg
-rw-r--r-- 1 root root  98K Jan 11 17:11 test_image.jpg
-rw-r--r-- 1 root root  25M Jan 11 17:11 test_video.yuv
-rwxr-xr-x 1 root root  89K Jan 13 16:24 test_wrapper_basic
-rwxr-xr-x 1 root root  95K Jan 13 16:24 test_wrapper_controls
-rwxr-xr-x 1 root root  91K Jan 13 16:24 test_wrapper_formats
-rwxr-xr-x 1 root root  97K Jan 13 16:24 test_wrapper_stress
root@raspberrypi4-64:~/workspace# ./test_wrapper_basic 
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  RPI Camera Wrapper - Basic Tests     â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

=== TEST 1: Create & Destroy ===
1.1. Creating camera 640x480 YUV420...
[0:02:26.632521901] [463]  INFO Camera camera_manager.cpp:327 libcamera v0.4.0+dirty (2025-12-07T15:39:35UTC)
[0:02:26.749885993] [464]  WARN RPiSdn sdn.cpp:40 Using legacy SDN tuning - please consider moving SDN inside rpi.denoise
[0:02:26.753396528] [464]  INFO RPI vc4.cpp:401 Registered camera /base/soc/i2c0mux/i2c@1/ov5647@36 to Unicam device /dev/media4 and ISP device /dev/media0
[0:02:26.754157787] [463]  INFO Camera camera.cpp:1202 configuring streams: (0) 640x480-YUV420
[0:02:26.754709435] [464]  INFO RPI vc4.cpp:570 Sensor: /base/soc/i2c0mux/i2c@1/ov5647@36 - Selected sensor format: 640x480-SGBRG10_1X10 - Selected unicam format: 640x480-pGAA
Camera created: 640x480
    âœ“ Camera created successfully
1.2. Destroying camera...
[0:02:26.758030100] [464] ERROR DeviceEnumerator device_enumerator.cpp:172 Removing media device /dev/media0 while still in use
[0:02:26.758099600] [464] ERROR DeviceEnumerator device_enumerator.cpp:172 Removing media device /dev/media4 while still in use
Segmentation fault (core dumped)
root@raspberrypi4-64:~/workspace# ./test_wrapper_      
test_wrapper_basic     test_wrapper_controls  test_wrapper_formats   test_wrapper_stress
root@raspberrypi4-64:~/workspace# ./test_wrapper_formats 
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  RPI Camera - Format Tests             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

=== TEST 1: YUV420 Format ===
1.1. Testing YUV420 640x480...
[0:04:20.709756228] [468]  INFO Camera camera_manager.cpp:327 libcamera v0.4.0+dirty (2025-12-07T15:39:35UTC)
[0:04:20.748126794] [469]  WARN RPiSdn sdn.cpp:40 Using legacy SDN tuning - please consider moving SDN inside rpi.denoise
[0:04:20.750277608] [469]  INFO RPI vc4.cpp:401 Registered camera /base/soc/i2c0mux/i2c@1/ov5647@36 to Unicam device /dev/media4 and ISP device /dev/media0
[0:04:20.750788604] [468]  INFO Camera camera.cpp:1202 configuring streams: (0) 640x480-YUV420
[0:04:20.751131348] [469]  INFO RPI vc4.cpp:570 Sensor: /base/soc/i2c0mux/i2c@1/ov5647@36 - Selected sensor format: 640x480-SGBRG10_1X10 - Selected unicam format: 640x480-pGAA
Camera created: 640x480
Camera started
Camera stopped
    Statistics:
      - Frames: 25
      - FPS: 16.55
      - Avg size: 307200 bytes
      - Min size: 307200 bytes
      - Max size: 307200 bytes
      - Expected: 460800 bytes
test_wrapper_formats: /home/adonisking/workspace/1.raspi-4/Personal-project/4.user_space_application/2.camera_pi4/test/test_wrapper/test_formats.c:88: test_yuv420: Assertion `stats.frame_count >= 40' failed.
Aborted (core dumped)
root@raspberrypi4-64:~/workspace# ./test_wrapper_controls 
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  RPI Camera - Control Tests            â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

=== TEST 1: Brightness Control ===
[0:04:45.553666307] [474]  INFO Camera camera_manager.cpp:327 libcamera v0.4.0+dirty (2025-12-07T15:39:35UTC)
[0:04:45.592818948] [475]  WARN RPiSdn sdn.cpp:40 Using legacy SDN tuning - please consider moving SDN inside rpi.denoise
[0:04:45.595062162] [475]  INFO RPI vc4.cpp:401 Registered camera /base/soc/i2c0mux/i2c@1/ov5647@36 to Unicam device /dev/media4 and ISP device /dev/media0
[0:04:45.595530220] [474]  INFO Camera camera.cpp:1202 configuring streams: (0) 640x480-YUV420
[0:04:45.595899759] [475]  INFO RPI vc4.cpp:570 Sensor: /base/soc/i2c0mux/i2c@1/ov5647@36 - Selected sensor format: 640x480-SGBRG10_1X10 - Selected unicam format: 640x480-pGAA
Camera created: 640x480
1.1. Testing brightness: Dark (-0.5)...
Camera started
Camera stopped
    Statistics:
      - Frames: 25
      - Samples: 5
      - Avg brightness: 15/255
test_wrapper_controls: /home/adonisking/workspace/1.raspi-4/Personal-project/4.user_space_application/2.camera_pi4/test/test_wrapper/test_controls.c:90: test_brightness: Assertion `stats.frame_count >= 40' failed.
Aborted (core dumped)
root@raspberrypi4-64:~/workspace# ./test_wrapper_stress   
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  RPI Camera - Stress Tests             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

=== TEST 1: Long Running Test (30s) ===
[0:04:57.408720481] [481]  INFO Camera camera_manager.cpp:327 libcamera v0.4.0+dirty (2025-12-07T15:39:35UTC)
[0:04:57.448498753] [482]  WARN RPiSdn sdn.cpp:40 Using legacy SDN tuning - please consider moving SDN inside rpi.denoise
[0:04:57.450701733] [482]  INFO RPI vc4.cpp:401 Registered camera /base/soc/i2c0mux/i2c@1/ov5647@36 to Unicam device /dev/media4 and ISP device /dev/media0
[0:04:57.451197325] [481]  INFO Camera camera.cpp:1202 configuring streams: (0) 640x480-YUV420
[0:04:57.451554196] [482]  INFO RPI vc4.cpp:570 Sensor: /base/soc/i2c0mux/i2c@1/ov5647@36 - Selected sensor format: 640x480-SGBRG10_1X10 - Selected unicam format: 640x480-pGAA
Camera created: 640x480
Camera started
Starting capture for 30 seconds...
Time | Frames | FPS  | Memory (KB)
-----|--------|------|------------
   5s |     73 | 14.6 | 9044
  10s |    152 | 15.2 | 9044
  15s |    232 | 15.5 | 9044
  20s |    311 | 15.6 | 9044
  25s |    412 | 16.5 | 9044
  30s |    491 | 16.4 | 9044
Camera stopped

Results:
  - Total frames: 491
  - Average FPS: 16.37
  - Total data: 143.85 MB
  - Memory growth: 384 KB
test_wrapper_stress: /home/adonisking/workspace/1.raspi-4/Personal-project/4.user_space_application/2.camera_pi4/test/test_wrapper/test_stress.c:73: test_long_running: Assertion `stats.frame_count >= 600' failed.
Aborted (core dumped)
root@raspberrypi4-64:~/workspace# ./sample_camera_app   
./sample_camera_app: error while loading shared libraries: librpi_camera_wrapper.so: cannot open shared object file: No such file or directory
root@raspberrypi4-64:~/workspace# ls
camera_test		  sample_camera_app  test_video.yuv	    test_wrapper_formats
frame_001.yuv		  test.jpg	     test_wrapper_basic     test_wrapper_stress
librpi_camera_wrapper.so  test_image.jpg     test_wrapper_controls
root@raspberrypi4-64:~/workspace# ./sample_camera_app 
./sample_camera_app: error while loading shared libraries: librpi_camera_wrapper.so: cannot open shared object file: No such file or directory
root@raspberrypi4-64:~/workspace# 
root@raspberrypi4-64:~/workspace# 
root@raspberrypi4-64:~/workspace# ./sample_camera_app 

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘         RPI CAMERA WRAPPER - SAMPLE APPLICATION          â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â†’ Creating output directory: ./captured_frames
âœ“ Output directory ready

â†’ Setting up signal handlers
âœ“ Signal handlers installed (Ctrl+C to stop)

â†’ Creating camera: 1280x720, YUV420
[0:07:53.606158847] [504]  INFO Camera camera_manager.cpp:327 libcamera v0.4.0+dirty (2025-12-07T15:39:35UTC)
[0:07:53.642598696] [505]  WARN RPiSdn sdn.cpp:40 Using legacy SDN tuning - please consider moving SDN inside rpi.denoise
[0:07:53.645059977] [505]  INFO RPI vc4.cpp:401 Registered camera /base/soc/i2c0mux/i2c@1/ov5647@36 to Unicam device /dev/media4 and ISP device /dev/media0
[0:07:53.645702552] [504]  INFO Camera camera.cpp:1202 configuring streams: (0) 1280x720-YUV420
[0:07:53.646157816] [505]  INFO RPI vc4.cpp:570 Sensor: /base/soc/i2c0mux/i2c@1/ov5647@36 - Selected sensor format: 1920x1080-SGBRG10_1X10 - Selected unicam format: 1920x1080-pGAA
Camera created: 1280x720
âœ“ Camera created successfully

â†’ Configuring camera controls
  âœ“ Brightness: 0.00
  âœ“ Contrast: 1.00
  âœ“ Exposure: 10000 Âµs
  âœ“ Gain: 1.00

â†’ Starting camera capture
Camera started
âœ“ Camera started, capturing frames...
â†’ Starting interactive control
  (You can adjust settings while capturing)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
              CAPTURING - Press 'q' to quit
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ First frame captured!                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Sequence:         8                     â”‚
â”‚ Size:        921600 bytes               â”‚
â”‚ Timestamp: 474152355000                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         CAMERA CONTROL MENU               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ b - Adjust brightness                     â”‚
â”‚ c - Adjust contrast                       â”‚
â”‚ e - Adjust exposure                       â”‚
â”‚ g - Adjust gain                           â”‚
â”‚ s - Toggle frame saving (ON/OFF)          â”‚
â”‚ i - Show current settings                 â”‚
â”‚ q - Quit                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
Enter command: Frame    30 | FPS:  15.5 | Size:  921600 B | Avg:  921600 B | Brightness:  34/255
Frame    60 | FPS:  15.2 | Size:  921600 B | Avg:  921600 B | Brightness:  34/255
Frame    90 | FPS:  15.1 | Size:  921600 B | Avg:  921600 B | Brightness:  34/255
bFrame   120 | FPS:  15.1 | Size:  921600 B | Avg:  921600 B | Brightness:  34/255
bbFrame   150 | FPS:  15.1 | Size:  921600 B | Avg:  921600 B | Brightness:  34/255
bbFrame   180 | FPS:  15.1 | Size:  921600 B | Avg:  921600 B | Brightness:  34/255

Enter brightness (-1.0 to 1.0): 
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         CAMERA CONTROL MENU               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ b - Adjust brightness                     â”‚
â”‚ c - Adjust contrast                       â”‚
â”‚ e - Adjust exposure                       â”‚
â”‚ g - Adjust gain                           â”‚
â”‚ s - Toggle frame saving (ON/OFF)          â”‚
â”‚ i - Show current settings                 â”‚
â”‚ q - Quit                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
Enter command: Enter brightness (-1.0 to 1.0): 
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         CAMERA CONTROL MENU               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ b - Adjust brightness                     â”‚
â”‚ c - Adjust contrast                       â”‚
â”‚ e - Adjust exposure                       â”‚
â”‚ g - Adjust gain                           â”‚
â”‚ s - Toggle frame saving (ON/OFF)          â”‚
â”‚ i - Show current settings                 â”‚
â”‚ q - Quit                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
Enter command: Enter brightness (-1.0 to 1.0): 
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         CAMERA CONTROL MENU               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ b - Adjust brightness                     â”‚
â”‚ c - Adjust contrast                       â”‚
â”‚ e - Adjust exposure                       â”‚
â”‚ g - Adjust gain                           â”‚
â”‚ s - Toggle frame saving (ON/OFF)          â”‚
â”‚ i - Show current settings                 â”‚
â”‚ q - Quit                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
Enter command: Enter brightness (-1.0 to 1.0): 
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         CAMERA CONTROL MENU               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ b - Adjust brightness                     â”‚
â”‚ c - Adjust contrast                       â”‚
â”‚ e - Adjust exposure                       â”‚
â”‚ g - Adjust gain                           â”‚
â”‚ s - Toggle frame saving (ON/OFF)          â”‚
â”‚ i - Show current settings                 â”‚
â”‚ q - Quit                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
Enter command: Enter brightness (-1.0 to 1.0): Frame   210 | FPS:  15.0 | Size:  921600 B | Avg:  921600 B | Brightness:  34/255
Frame   240 | FPS:  15.0 | Size:  921600 B | Avg:  921600 B | Brightness:  34/255
Frame   270 | FPS:  15.0 | Size:  921600 B | Avg:  921600 B | Brightness:  34/255
Frame   300 | FPS:  15.0 | Size:  921600 B | Avg:  921600 B | Brightness:  34/255
Frame   330 | FPS:  15.0 | Size:  921600 B | Avg:  921600 B | Brightness:  34/255
0
âœ“ Brightness set to 0.00

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         CAMERA CONTROL MENU               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ b - Adjust brightness                     â”‚
â”‚ c - Adjust contrast                       â”‚
â”‚ e - Adjust exposure                       â”‚
â”‚ g - Adjust gain                           â”‚
â”‚ s - Toggle frame saving (ON/OFF)          â”‚
â”‚ i - Show current settings                 â”‚
â”‚ q - Quit                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
Enter command: Frame   360 | FPS:  15.0 | Size:  921600 B | Avg:  921600 B | Brightness:  35/255
Frame   390 | FPS:  15.0 | Size:  921600 B | Avg:  921600 B | Brightness:  35/255
Frame   420 | FPS:  15.0 | Size:  921600 B | Avg:  921600 B | Brightness:  35/255
Frame   450 | FPS:  15.0 | Size:  921600 B | Avg:  921600 B | Brightness:  35/255
qFrame   480 | FPS:  15.0 | Size:  921600 B | Avg:  921600 B | Brightness:  35/255

Quitting...

â†’ Stopping camera
Camera stopped
âœ“ Camera stopped

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    CAPTURE STATISTICS                     â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ Total Frames:          481                                â•‘
â•‘ Saved Frames:            0                                â•‘
â•‘ Duration:            32.05 seconds                       â•‘
â•‘ Average FPS:         15.01                               â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ Total Data:         422.75 MB                            â•‘
â•‘ Average Size:       921600 bytes/frame                   â•‘
â•‘ Min Size:           921600 bytes                          â•‘
â•‘ Max Size:           921600 bytes                          â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ Resolution:       1280x720                              â•‘
â•‘ Format:           YUV420                                 â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ Brightness:           0.00                               â•‘
â•‘ Contrast:             1.00                               â•‘
â•‘ Exposure:            10000 Âµs                             â•‘
â•‘ Gain:                 1.00                               â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â†’ Cleaning up
[0:08:26.292889149] [505] ERROR DeviceEnumerator device_enumerator.cpp:172 Removing media device /dev/media0 while still in use
[0:08:26.292992072] [505] ERROR DeviceEnumerator device_enumerator.cpp:172 Removing media device /dev/media4 while still in use
âœ“ Cleanup complete

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                  APPLICATION FINISHED                     â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

root@raspberrypi4-64:~/workspace# 



---
DAY 2

root@raspberrypi4-64:~/workspace# ./test_wrapper_basic 
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  RPI Camera Wrapper - Basic Tests     â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

=== TEST 1: Create & Destroy ===
1.1. Creating camera 640x480 YUV420...
[0:48:20.470798506] [870]  INFO Camera camera_manager.cpp:327 libcamera v0.4.0+dirty (2025-12-07T15:39:35UTC)
[0:48:20.507105835] [871]  WARN RPiSdn sdn.cpp:40 Using legacy SDN tuning - please consider moving SDN inside rpi.denoise
[0:48:20.509403023] [871]  INFO RPI vc4.cpp:401 Registered camera /base/soc/i2c0mux/i2c@1/ov5647@36 to Unicam device /dev/media4 and ISP device /dev/media0
Find camera: /base/soc/i2c0mux/i2c@1/ov5647@36
[INFO]: Camera config validate!
[0:48:20.509936644] [870]  INFO Camera camera.cpp:1202 configuring streams: (0) 640x480-YUV420
[0:48:20.510294824] [871]  INFO RPI vc4.cpp:570 Sensor: /base/soc/i2c0mux/i2c@1/ov5647@36 - Selected sensor format: 640x480-SGBRG10_1X10 - Selected unicam format: 640x480-pGAA
[INFO]: Camera configuration!
[INFO]: Allocate buffers...!

Camera created: 640x480
    âœ“ Camera created successfully
1.2. Destroying camera...
    âœ“ Camera destroyed successfully
1.3. Destroying NULL camera...
    âœ“ NULL destroy handled correctly

=== TEST 2: Start & Stop (Pull Model) ===
[0:48:20.514723129] [870]  INFO Camera camera_manager.cpp:327 libcamera v0.4.0+dirty (2025-12-07T15:39:35UTC)
[0:48:20.553134889] [874]  WARN RPiSdn sdn.cpp:40 Using legacy SDN tuning - please consider moving SDN inside rpi.denoise
[0:48:20.555274302] [874]  INFO RPI vc4.cpp:401 Registered camera /base/soc/i2c0mux/i2c@1/ov5647@36 to Unicam device /dev/media4 and ISP device /dev/media0
Find camera: /base/soc/i2c0mux/i2c@1/ov5647@36
[INFO]: Camera config validate!
[0:48:20.555789868] [870]  INFO Camera camera.cpp:1202 configuring streams: (0) 640x480-YUV420
[0:48:20.556123400] [874]  INFO RPI vc4.cpp:570 Sensor: /base/soc/i2c0mux/i2c@1/ov5647@36 - Selected sensor format: 640x480-SGBRG10_1X10 - Selected unicam format: 640x480-pGAA
[INFO]: Camera configuration!
[INFO]: Allocate buffers...!

Camera created: 640x480
[INFO]: Camera Start...!
[INFO]: Camera started...!
    âœ“ Camera started
    Pulling frames for 3 seconds...
[INFO]: Camera stopped
    âœ“ Camera stopped
    Statistics:
      - Total frames: 10
      - Last sequence: 17
      - Duration: 2901641.46 ms
    âœ“ Frame count OK (>= 60 frames)
    âœ“ Sequence numbers OK

=== TEST 3: Multiple Start/Stop (Pull Model) ===
[0:48:21.686196800] [870]  INFO Camera camera_manager.cpp:327 libcamera v0.4.0+dirty (2025-12-07T15:39:35UTC)
[0:48:21.727619127] [878]  WARN RPiSdn sdn.cpp:40 Using legacy SDN tuning - please consider moving SDN inside rpi.denoise
[0:48:21.729745503] [878]  INFO RPI vc4.cpp:401 Registered camera /base/soc/i2c0mux/i2c@1/ov5647@36 to Unicam device /dev/media4 and ISP device /dev/media0
Find camera: /base/soc/i2c0mux/i2c@1/ov5647@36
[INFO]: Camera config validate!
[0:48:21.730438271] [870]  INFO Camera camera.cpp:1202 configuring streams: (0) 640x480-YUV420
[0:48:21.730873449] [878]  INFO RPI vc4.cpp:570 Sensor: /base/soc/i2c0mux/i2c@1/ov5647@36 - Selected sensor format: 640x480-SGBRG10_1X10 - Selected unicam format: 640x480-pGAA
[INFO]: Camera configuration!
[INFO]: Allocate buffers...!

Camera created: 640x480
3.1. Start/Stop cycle 1...
[INFO]: Camera Start...!
[INFO]: Camera started...!
[INFO]: Camera stopped
    âœ“ Cycle 1: 10 frames captured
3.2. Start/Stop cycle 2...
[INFO]: Camera Start...!
[INFO]: Camera started...!
[INFO]: Camera stopped
    âœ“ Cycle 2: 15 frames captured
3.3. Start/Stop cycle 3...
[INFO]: Camera Start...!
[INFO]: Camera started...!
[INFO]: Camera stopped
    âœ“ Cycle 3: 15 frames captured

=== TEST 4: Error Handling (Pull Model) ===
4.1. Starting NULL camera...
[ERROR]: NULL ptr...!
    âœ“ NULL camera rejected
[0:48:25.098564960] [870]  INFO Camera camera_manager.cpp:327 libcamera v0.4.0+dirty (2025-12-07T15:39:35UTC)
[0:48:25.140784646] [884]  WARN RPiSdn sdn.cpp:40 Using legacy SDN tuning - please consider moving SDN inside rpi.denoise
[0:48:25.142962151] [884]  INFO RPI vc4.cpp:401 Registered camera /base/soc/i2c0mux/i2c@1/ov5647@36 to Unicam device /dev/media4 and ISP device /dev/media0
Find camera: /base/soc/i2c0mux/i2c@1/ov5647@36
[INFO]: Camera config validate!
[0:48:25.143561179] [870]  INFO Camera camera.cpp:1202 configuring streams: (0) 640x480-YUV420
[0:48:25.143939137] [884]  INFO RPI vc4.cpp:570 Sensor: /base/soc/i2c0mux/i2c@1/ov5647@36 - Selected sensor format: 640x480-SGBRG10_1X10 - Selected unicam format: 640x480-pGAA
[INFO]: Camera configuration!
[INFO]: Allocate buffers...!

Camera created: 640x480
4.2. Stopping camera that wasn't started...
[INFO]: Camera has not been running...!
    âœ“ Stop before start handled
4.3. Get frame before start...
    âœ“ Get frame before start rejected
4.4. Double start...
[INFO]: Camera Start...!
[INFO]: Camera started...!
[INFO]: Camera still running...!
    âœ“ Double start handled
[INFO]: Camera stopped

=== TEST 5: Frame Data Validation ===
[0:48:25.262089564] [870]  INFO Camera camera_manager.cpp:327 libcamera v0.4.0+dirty (2025-12-07T15:39:35UTC)
[0:48:25.304453823] [888]  WARN RPiSdn sdn.cpp:40 Using legacy SDN tuning - please consider moving SDN inside rpi.denoise
[0:48:25.306576939] [888]  INFO RPI vc4.cpp:401 Registered camera /base/soc/i2c0mux/i2c@1/ov5647@36 to Unicam device /dev/media4 and ISP device /dev/media0
Find camera: /base/soc/i2c0mux/i2c@1/ov5647@36
[INFO]: Camera config validate!
[0:48:25.307206800] [870]  INFO Camera camera.cpp:1202 configuring streams: (0) 640x480-YUV420
[0:48:25.307571202] [888]  INFO RPI vc4.cpp:570 Sensor: /base/soc/i2c0mux/i2c@1/ov5647@36 - Selected sensor format: 640x480-SGBRG10_1X10 - Selected unicam format: 640x480-pGAA
[INFO]: Camera configuration!
[INFO]: Allocate buffers...!

Camera created: 640x480
[INFO]: Camera Start...!
[INFO]: Camera started...!
    First frame:
      Size: 307200 bytes
      Timestamp: 2905822830000
      Sequence: 8
[INFO]: Camera stopped
    âœ“ Frame validation passed (10 frames)

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  âœ“ ALL BASIC TESTS PASSED              â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
root@raspberrypi4-64:~/workspace# 


---
test_wrapper_basic: /home/adonisking/workspace/1.raspi-4/Personal-project/4.user_space_application/2.camera_pi4/test/test_wrapper/test_basic.c:204: test_frame_validation: Assertion frame.size >= expected * 0.9' failed.
Aborted (core dumped)

bá»‹ nÃ y thÃ¬ cÃ³ váº¥n Ä‘á» gÃ¬ khÃ´ng?

CÃ¢u tráº£ lá»i ngáº¯n gá»n: cÃ³ váº¥n Ä‘á» tháº­t, nhÆ°ng khÃ´ng pháº£i camera há»ng ğŸ˜„
ÄÃ¢y lÃ  lá»—i logic vá» â€œframe sizeâ€, ráº¥t hay gáº·p khi dÃ¹ng YUV420 + libcamera.

MÃ¬nh giáº£i thÃ­ch chÃ­nh xÃ¡c vÃ¬ sao assert nÃ y fail, vÃ  báº¡n nÃªn sá»­a test hay sá»­a driver.

âŒ ASSERT FAIL ÄANG KIá»‚M TRA CÃI GÃŒ?
Assertion `frame.size >= expected * 0.9' failed


Trong test_frame_validation thÆ°á»ng cÃ³ dáº¡ng:

expected = width * height * 3 / 2;   // YUV420


Test Ä‘ang giáº£ Ä‘á»‹nh:

buffer Ä‘áº£m báº£o chá»©a gáº§n Ä‘á»§ raw YUV420 bytes

ğŸ‘‰ NhÆ°ng libcamera KHÃ”NG Ä‘áº£m báº£o Ä‘iá»u Ä‘Ã³.

ğŸš¨ NGUYÃŠN NHÃ‚N THá»°C Sá»° (100%)
1ï¸âƒ£ FrameBuffer â‰  raw contiguous YUV buffer

Trong libcamera:

FrameBuffer gá»“m n planes

Má»—i plane cÃ³:

stride

offset

length

CÃ³ padding / alignment / tiling

â¡ï¸ frame.size báº¡n Ä‘ang tráº£ vá» thÆ°á»ng lÃ :

âŒ tá»•ng bytes Ä‘Ã£ map

âŒ hoáº·c size plane[0]

âŒ hoáº·c metadata size

ğŸ‘‰ KHÃ”NG pháº£i raw YUV size

2ï¸âƒ£ Vá»›i YUV420 trÃªn RPi ISP

VÃ­ dá»¥ 640Ã—480:

Plane	Ná»™i dung	Size thá»±c
0	Y	stride Ã— height
1	UV	stride Ã— height / 2

Stride thÆ°á»ng > width

â¡ï¸ Tá»•ng bytes:

CÃ³ thá»ƒ lá»›n hÆ¡n expected

Hoáº·c nhá» hÆ¡n expected náº¿u báº¡n chá»‰ cá»™ng plane[0]

3ï¸âƒ£ libcamera cho phÃ©p cropping / subsampling

Frame cÃ³ thá»ƒ:

crop nháº¹

scale nháº¹

alignment padding

â¡ï¸ Test dÃ¹ng expected * 0.9 váº«n khÃ´ng Ä‘á»§ an toÃ n

ğŸ§  Váº¬Y Lá»–I Náº°M á» ÄÃ‚U?
ThÃ nh pháº§n	CÃ³ lá»—i khÃ´ng
Camera / ISP	âŒ KhÃ´ng
libcamera	âŒ KhÃ´ng
Wrapper	âš ï¸ CÃ³ thá»ƒ
Test	âœ… Sai giáº£ Ä‘á»‹nh

â¡ï¸ Test Ä‘ang assume quÃ¡ nhiá»u

âœ… CÃCH Sá»¬A ÄÃšNG (CHá»ŒN 1)
ğŸŸ¢ CÃCH 1 (KHUYáº¾N NGHá»Š): Äá»ªNG CHECK frame.size
Thay vÃ¬:
assert(frame.size >= expected * 0.9);

HÃ£y check:
assert(frame.width == expected_width);
assert(frame.height == expected_height);
assert(frame.sequence > 0);
assert(frame.timestamp > 0);


ğŸ“Œ ÄÃ¢y lÃ  cÃ¡ch libcamera-apps test

ğŸŸ¢ CÃCH 2: TÃNH SIZE ÄÃšNG Tá»ª PLANE

Náº¿u báº¡n muá»‘n test dá»¯ liá»‡u thá»±c sá»±, thÃ¬ wrapper pháº£i export plane info.

struct Ä‘Ãºng
typedef struct {
    void *planes[3];
    size_t plane_size[3];
    uint32_t num_planes;
} rpi_frame_t;

Size thá»±c:
size_t total = 0;
for (i = 0; i < frame.num_planes; i++)
    total += frame.plane_size[i];

Test:
assert(total >= expected);

ğŸŸ¢ CÃCH 3: Náº¿u váº«n muá»‘n dÃ¹ng frame.size

ğŸ‘‰ Chá»‰ dÃ¹ng cho RGB / MJPEG

if (format == YUV420)
    SKIP size validation;

âŒ KHÃ”NG NÃŠN LÃ€M

âŒ Giáº£ sá»­:

frame.size = width * height * 3 / 2;


â†’ SAI vá»›i:

stride

alignment

zero-copy DMA buffer

ğŸ§ª Táº I SAO TEST 2 OK, TEST 3 FAIL?

Test 3:

start/stop nhiá»u láº§n

buffer reuse

ISP padding thay Ä‘á»•i nháº¹

Frame size dao Ä‘á»™ng â†’ Ä‘á»¥ng ngÆ°á»¡ng 0.9

âœ… Káº¾T LUáº¬N

FAIL NÃ€Y KHÃ”NG PHáº¢I BUG CAMERA
LÃ  BUG TEST

âœ” Camera váº«n cháº¡y Ä‘Ãºng
âœ” Pipeline OK
âœ” Restart OK

Náº¿u báº¡n muá»‘n, mÃ¬nh cÃ³ thá»ƒ:

âœ¨ Viáº¿t láº¡i test_frame_validation() Ä‘Ãºng chuáº©n libcamera

ğŸ” Audit rpi_camera_get_frame() (ráº¥t hay sai)

ğŸ“¦ Chuáº©n hÃ³a API frame (zero-copy vs copy)

Chá»‰ cáº§n nÃ³i ğŸ‘



=======
DAY 3


root@raspberrypi4-64:~/workspace# ./test_wrapper_formats 
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  RPI Camera - Format Tests             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

=== TEST 1: YUV420 Format ===
1.1. Testing YUV420 640x480...
[1:34:42.585617501] [786]  INFO Camera camera_manager.cpp:327 libcamera v0.4.0+dirty (2025-12-07T15:39:35UTC)
[1:34:42.625506264] [787]  WARN RPiSdn sdn.cpp:40 Using legacy SDN tuning - please consider moving SDN inside rpi.denoise
[1:34:42.627738300] [787]  INFO RPI vc4.cpp:401 Registered camera /base/soc/i2c0mux/i2c@1/ov5647@36 to Unicam device /dev/media4 and ISP device /dev/media0
Find camera: /base/soc/i2c0mux/i2c@1/ov5647@36
[INFO]: Camera config validate!
[1:34:42.628276606] [786]  INFO Camera camera.cpp:1202 configuring streams: (0) 640x480-YUV420
[1:34:42.628644914] [787]  INFO RPI vc4.cpp:570 Sensor: /base/soc/i2c0mux/i2c@1/ov5647@36 - Selected sensor format: 640x480-SGBRG10_1X10 - Selected unicam format: 640x480-pGAA
[INFO]: Camera configuration!
[INFO]: Allocate buffers...!

Camera created: 640x480
[INFO]: Camera Start...!
[INFO]: Camera started...!
[INFO]:    Capturing frames for 2 seconds...
[INFO]: Camera stopped
    Statistics:
      - Frames: 21
      - FPS: 0.00
      - Avg size: 460800 bytes
      - Min size: 460800 bytes
      - Max size: 460800 bytes
      - Expected: 460800 bytes
 âœ“ PASSED
1.2. Testing YUV420 1280x720...
[1:34:44.449784685] [786]  INFO Camera camera_manager.cpp:327 libcamera v0.4.0+dirty (2025-12-07T15:39:35UTC)
[1:34:44.491903447] [791]  WARN RPiSdn sdn.cpp:40 Using legacy SDN tuning - please consider moving SDN inside rpi.denoise
[1:34:44.494094854] [791]  INFO RPI vc4.cpp:401 Registered camera /base/soc/i2c0mux/i2c@1/ov5647@36 to Unicam device /dev/media4 and ISP device /dev/media0
Find camera: /base/soc/i2c0mux/i2c@1/ov5647@36
[INFO]: Camera config validate!
[1:34:44.494660270] [786]  INFO Camera camera.cpp:1202 configuring streams: (0) 1280x720-YUV420
[1:34:44.495033671] [791]  INFO RPI vc4.cpp:570 Sensor: /base/soc/i2c0mux/i2c@1/ov5647@36 - Selected sensor format: 1920x1080-SGBRG10_1X10 - Selected unicam format: 1920x1080-pGAA
[INFO]: Camera configuration!
[INFO]: Allocate buffers...!

Camera created: 1280x720
[INFO]: Camera Start...!
[INFO]: Camera started...!
[INFO]:    Capturing frames for 2 seconds...
[INFO]: Camera stopped
    Statistics:
      - Frames: 0
      - FPS: 0.00
      - Avg size: nan bytes
      - Min size: 18446744073709551615 bytes
      - Max size: 0 bytes
      - Expected: 1382400 bytes
 âœ“ PASSED
1.3. Testing YUV420 1920x1080...
[1:34:44.620649008] [786]  INFO Camera camera_manager.cpp:327 libcamera v0.4.0+dirty (2025-12-07T15:39:35UTC)
[1:34:44.663047413] [795]  WARN RPiSdn sdn.cpp:40 Using legacy SDN tuning - please consider moving SDN inside rpi.denoise
[1:34:44.665611777] [795]  INFO RPI vc4.cpp:401 Registered camera /base/soc/i2c0mux/i2c@1/ov5647@36 to Unicam device /dev/media4 and ISP device /dev/media0
Find camera: /base/soc/i2c0mux/i2c@1/ov5647@36
[INFO]: Camera config validate!
[1:34:44.666131527] [786]  INFO Camera camera.cpp:1202 configuring streams: (0) 1920x1080-YUV420
[1:34:44.666498632] [795]  INFO RPI vc4.cpp:570 Sensor: /base/soc/i2c0mux/i2c@1/ov5647@36 - Selected sensor format: 1920x1080-SGBRG10_1X10 - Selected unicam format: 1920x1080-pGAA
[INFO]: Camera configuration!
[INFO]: Allocate buffers...!

Camera created: 1920x1080
[INFO]: Camera Start...!
[INFO]: Camera started...!
[INFO]:    Capturing frames for 2 seconds...
[INFO]: Camera stopped
    Statistics:
      - Frames: 0
      - FPS: 0.00
      - Avg size: nan bytes
      - Min size: 18446744073709551615 bytes
      - Max size: 0 bytes
      - Expected: 3110400 bytes
 âœ“ PASSED

=== TEST 2: RGB888 Format ===
2.1. Testing RGB888 640x480...
[1:34:44.798031108] [786]  INFO Camera camera_manager.cpp:327 libcamera v0.4.0+dirty (2025-12-07T15:39:35UTC)
[1:34:44.839485604] [799]  WARN RPiSdn sdn.cpp:40 Using legacy SDN tuning - please consider moving SDN inside rpi.denoise
[1:34:44.841962358] [799]  INFO RPI vc4.cpp:401 Registered camera /base/soc/i2c0mux/i2c@1/ov5647@36 to Unicam device /dev/media4 and ISP device /dev/media0
Find camera: /base/soc/i2c0mux/i2c@1/ov5647@36
[INFO]: Camera config validate!
[1:34:44.842559978] [786]  INFO Camera camera.cpp:1202 configuring streams: (0) 640x480-RGB888
[1:34:44.842912398] [799]  INFO RPI vc4.cpp:570 Sensor: /base/soc/i2c0mux/i2c@1/ov5647@36 - Selected sensor format: 640x480-SGBRG10_1X10 - Selected unicam format: 640x480-pGAA
[INFO]: Camera configuration!
[INFO]: Allocate buffers...!

Camera created: 640x480
[INFO]: Camera Start...!
[INFO]: Camera started...!
[INFO]:    Capturing frames for 2 seconds...
[INFO]: Camera stopped
    Statistics:
      - Frames: 0
      - FPS: 0.00
      - Avg size: nan bytes
      - Min size: 18446744073709551615 bytes
      - Max size: 0 bytes
      - Expected: 921600 bytes
 âœ“ PASSED
2.2. Testing RGB888 1280x720...
[1:34:44.958535534] [786]  INFO Camera camera_manager.cpp:327 libcamera v0.4.0+dirty (2025-12-07T15:39:35UTC)
[1:34:44.999984882] [803]  WARN RPiSdn sdn.cpp:40 Using legacy SDN tuning - please consider moving SDN inside rpi.denoise
[1:34:45.002540690] [803]  INFO RPI vc4.cpp:401 Registered camera /base/soc/i2c0mux/i2c@1/ov5647@36 to Unicam device /dev/media4 and ISP device /dev/media0
Find camera: /base/soc/i2c0mux/i2c@1/ov5647@36
[INFO]: Camera config validate!
[1:34:45.003169569] [786]  INFO Camera camera.cpp:1202 configuring streams: (0) 1280x720-RGB888
[1:34:45.003550858] [803]  INFO RPI vc4.cpp:570 Sensor: /base/soc/i2c0mux/i2c@1/ov5647@36 - Selected sensor format: 1920x1080-SGBRG10_1X10 - Selected unicam format: 1920x1080-pGAA
[INFO]: Camera configuration!
[INFO]: Allocate buffers...!

Camera created: 1280x720
[INFO]: Camera Start...!
[INFO]: Camera started...!
[INFO]:    Capturing frames for 2 seconds...
[INFO]: Camera stopped
    Statistics:
      - Frames: 0
      - FPS: 0.00
      - Avg size: nan bytes
      - Min size: 18446744073709551615 bytes
      - Max size: 0 bytes
      - Expected: 2764800 bytes
 âœ“ PASSED
2.3. Testing RGB888 1920x1080...
[1:34:45.135011762] [786]  INFO Camera camera_manager.cpp:327 libcamera v0.4.0+dirty (2025-12-07T15:39:35UTC)
[1:34:45.174340387] [807]  WARN RPiSdn sdn.cpp:40 Using legacy SDN tuning - please consider moving SDN inside rpi.denoise
[1:34:45.176491850] [807]  INFO RPI vc4.cpp:401 Registered camera /base/soc/i2c0mux/i2c@1/ov5647@36 to Unicam device /dev/media4 and ISP device /dev/media0
Find camera: /base/soc/i2c0mux/i2c@1/ov5647@36
[INFO]: Camera config validate!
[1:34:45.177109469] [786]  INFO Camera camera.cpp:1202 configuring streams: (0) 1920x1080-RGB888
[1:34:45.177479574] [807]  INFO RPI vc4.cpp:570 Sensor: /base/soc/i2c0mux/i2c@1/ov5647@36 - Selected sensor format: 1920x1080-SGBRG10_1X10 - Selected unicam format: 1920x1080-pGAA
[INFO]: Camera configuration!
[INFO]: Allocate buffers...!

Camera created: 1920x1080
[INFO]: Camera Start...!
[INFO]: Camera started...!
[INFO]:    Capturing frames for 2 seconds...
[INFO]: Camera stopped
    Statistics:
      - Frames: 0
      - FPS: 0.00
      - Avg size: nan bytes
      - Min size: 18446744073709551615 bytes
      - Max size: 0 bytes
      - Expected: 6220800 bytes
 âœ“ PASSED

=== TEST 3: MJPEG Format ===
3.1. Testing MJPEG 640x480...
[1:34:45.320207785] [786]  INFO Camera camera_manager.cpp:327 libcamera v0.4.0+dirty (2025-12-07T15:39:35UTC)
[1:34:45.359333524] [811]  WARN RPiSdn sdn.cpp:40 Using legacy SDN tuning - please consider moving SDN inside rpi.denoise
[1:34:45.361677299] [811]  INFO RPI vc4.cpp:401 Registered camera /base/soc/i2c0mux/i2c@1/ov5647@36 to Unicam device /dev/media4 and ISP device /dev/media0
Find camera: /base/soc/i2c0mux/i2c@1/ov5647@36
[INFO]: Camera configuration adjusted by libcamera!
[1:34:45.362273900] [786]  INFO Camera camera.cpp:1202 configuring streams: (0) 640x480-YUYV
[1:34:45.362647653] [811]  INFO RPI vc4.cpp:570 Sensor: /base/soc/i2c0mux/i2c@1/ov5647@36 - Selected sensor format: 640x480-SGBRG10_1X10 - Selected unicam format: 640x480-pGAA
[INFO]: Camera configuration!
[INFO]: Allocate buffers...!

Camera created: 640x480
[INFO]: Camera Start...!
[INFO]: Camera started...!
[INFO]:    Capturing frames for 2 seconds...
[INFO]: Camera stopped
    Statistics:
      - Frames: 0
      - FPS: 0.00
      - Avg size: nan bytes
      - Min size: 18446744073709551615 bytes
      - Max size: 0 bytes
      - Expected: 10000 bytes
 âœ“ PASSED
3.2. Testing MJPEG 1280x720...
[1:34:45.478042553] [786]  INFO Camera camera_manager.cpp:327 libcamera v0.4.0+dirty (2025-12-07T15:39:35UTC)
[1:34:45.521495626] [815]  WARN RPiSdn sdn.cpp:40 Using legacy SDN tuning - please consider moving SDN inside rpi.denoise
[1:34:45.523587294] [815]  INFO RPI vc4.cpp:401 Registered camera /base/soc/i2c0mux/i2c@1/ov5647@36 to Unicam device /dev/media4 and ISP device /dev/media0
Find camera: /base/soc/i2c0mux/i2c@1/ov5647@36
[INFO]: Camera configuration adjusted by libcamera!
[1:34:45.524248394] [786]  INFO Camera camera.cpp:1202 configuring streams: (0) 1280x720-YUYV
[1:34:45.524633128] [815]  INFO RPI vc4.cpp:570 Sensor: /base/soc/i2c0mux/i2c@1/ov5647@36 - Selected sensor format: 1920x1080-SGBRG10_1X10 - Selected unicam format: 1920x1080-pGAA
[INFO]: Camera configuration!
[INFO]: Allocate buffers...!

Camera created: 1280x720
[INFO]: Camera Start...!
[INFO]: Camera started...!
[INFO]:    Capturing frames for 2 seconds...
[INFO]: Camera stopped
    Statistics:
      - Frames: 0
      - FPS: 0.00
      - Avg size: nan bytes
      - Min size: 18446744073709551615 bytes
      - Max size: 0 bytes
      - Expected: 20000 bytes
 âœ“ PASSED
3.3. Testing MJPEG 1920x1080...
[1:34:45.650480275] [786]  INFO Camera camera_manager.cpp:327 libcamera v0.4.0+dirty (2025-12-07T15:39:35UTC)
[1:34:45.693463819] [819]  WARN RPiSdn sdn.cpp:40 Using legacy SDN tuning - please consider moving SDN inside rpi.denoise
[1:34:45.695561154] [819]  INFO RPI vc4.cpp:401 Registered camera /base/soc/i2c0mux/i2c@1/ov5647@36 to Unicam device /dev/media4 and ISP device /dev/media0
Find camera: /base/soc/i2c0mux/i2c@1/ov5647@36
[INFO]: Camera configuration adjusted by libcamera!
[1:34:45.696243698] [786]  INFO Camera camera.cpp:1202 configuring streams: (0) 1920x1080-YUYV
[1:34:45.696635395] [819]  INFO RPI vc4.cpp:570 Sensor: /base/soc/i2c0mux/i2c@1/ov5647@36 - Selected sensor format: 1920x1080-SGBRG10_1X10 - Selected unicam format: 1920x1080-pGAA
[INFO]: Camera configuration!
[INFO]: Allocate buffers...!

Camera created: 1920x1080
[INFO]: Camera Start...!
[INFO]: Camera started...!
[INFO]:    Capturing frames for 2 seconds...
[INFO]: Camera stopped
    Statistics:
      - Frames: 0
      - FPS: 0.00
      - Avg size: nan bytes
      - Min size: 18446744073709551615 bytes
      - Max size: 0 bytes
      - Expected: 30000 bytes
 âœ“ PASSED

=== TEST 4: Resolution Limits ===
4.1. Testing minimum resolution (320x240)...
[1:34:45.829470349] [786]  INFO Camera camera_manager.cpp:327 libcamera v0.4.0+dirty (2025-12-07T15:39:35UTC)
[1:34:45.868442720] [823]  WARN RPiSdn sdn.cpp:40 Using legacy SDN tuning - please consider moving SDN inside rpi.denoise
[1:34:45.870542870] [823]  INFO RPI vc4.cpp:401 Registered camera /base/soc/i2c0mux/i2c@1/ov5647@36 to Unicam device /dev/media4 and ISP device /dev/media0
Find camera: /base/soc/i2c0mux/i2c@1/ov5647@36
[INFO]: Camera config validate!
[1:34:45.871136656] [786]  INFO Camera camera.cpp:1202 configuring streams: (0) 320x240-YUV420
[1:34:45.871513353] [823]  INFO RPI vc4.cpp:570 Sensor: /base/soc/i2c0mux/i2c@1/ov5647@36 - Selected sensor format: 640x480-SGBRG10_1X10 - Selected unicam format: 640x480-pGAA
[INFO]: Camera configuration!
[INFO]: Allocate buffers...!

Camera created: 320x240
[INFO]: Camera Start...!
[INFO]: Camera started...!
[INFO]:    Capturing frames for 2 seconds...
[INFO]: Camera stopped
    âœ“ Min resolution works: 0 frames
 âœ“ PASSED
4.2. Testing high resolution (2592x1944)...
[1:34:45.985290744] [786]  INFO Camera camera_manager.cpp:327 libcamera v0.4.0+dirty (2025-12-07T15:39:35UTC)
[1:34:46.027477616] [827]  WARN RPiSdn sdn.cpp:40 Using legacy SDN tuning - please consider moving SDN inside rpi.denoise
[1:34:46.030010110] [827]  INFO RPI vc4.cpp:401 Registered camera /base/soc/i2c0mux/i2c@1/ov5647@36 to Unicam device /dev/media4 and ISP device /dev/media0
Find camera: /base/soc/i2c0mux/i2c@1/ov5647@36
[INFO]: Camera config validate!
[1:34:46.030660321] [786]  INFO Camera camera.cpp:1202 configuring streams: (0) 2592x1944-YUV420
[1:34:46.031024482] [827]  INFO RPI vc4.cpp:570 Sensor: /base/soc/i2c0mux/i2c@1/ov5647@36 - Selected sensor format: 2592x1944-SGBRG10_1X10 - Selected unicam format: 2592x1944-pGAA
[INFO]: Camera configuration!
[INFO]: Allocate buffers...!

Camera created: 2592x1944
[INFO]: Camera Start...!
[INFO]: Camera started...!
[INFO]: Camera stopped
    âœ“ High resolution works: 0 frames
 âœ“ PASSED

=== TEST 5: Format Switching ===
5.1. Testing YUV420 format...
[1:34:46.184348660] [786]  INFO Camera camera_manager.cpp:327 libcamera v0.4.0+dirty (2025-12-07T15:39:35UTC)
[1:34:46.223958780] [831]  WARN RPiSdn sdn.cpp:40 Using legacy SDN tuning - please consider moving SDN inside rpi.denoise
[1:34:46.226532421] [831]  INFO RPI vc4.cpp:401 Registered camera /base/soc/i2c0mux/i2c@1/ov5647@36 to Unicam device /dev/media4 and ISP device /dev/media0
Find camera: /base/soc/i2c0mux/i2c@1/ov5647@36
[INFO]: Camera config validate!
[1:34:46.227121763] [786]  INFO Camera camera.cpp:1202 configuring streams: (0) 640x480-YUV420
[1:34:46.227468461] [831]  INFO RPI vc4.cpp:570 Sensor: /base/soc/i2c0mux/i2c@1/ov5647@36 - Selected sensor format: 640x480-SGBRG10_1X10 - Selected unicam format: 640x480-pGAA
[INFO]: Camera configuration!
[INFO]: Allocate buffers...!

Camera created: 640x480
[INFO]: Camera Start...!
[INFO]: Camera started...!
[INFO]:    Capturing frames for 2 seconds...
[INFO]: Camera stopped
    âœ“ YUV420: 0 frames captured
5.2. Testing RGB888 format...
[1:34:46.342837084] [786]  INFO Camera camera_manager.cpp:327 libcamera v0.4.0+dirty (2025-12-07T15:39:35UTC)
[1:34:46.383977678] [835]  WARN RPiSdn sdn.cpp:40 Using legacy SDN tuning - please consider moving SDN inside rpi.denoise
[1:34:46.386803407] [835]  INFO RPI vc4.cpp:401 Registered camera /base/soc/i2c0mux/i2c@1/ov5647@36 to Unicam device /dev/media4 and ISP device /dev/media0
Find camera: /base/soc/i2c0mux/i2c@1/ov5647@36
[INFO]: Camera config validate!
[1:34:46.387397490] [786]  INFO Camera camera.cpp:1202 configuring streams: (0) 640x480-RGB888
[1:34:46.387749465] [835]  INFO RPI vc4.cpp:570 Sensor: /base/soc/i2c0mux/i2c@1/ov5647@36 - Selected sensor format: 640x480-SGBRG10_1X10 - Selected unicam format: 640x480-pGAA
[INFO]: Camera configuration!
[INFO]: Allocate buffers...!

Camera created: 640x480
[INFO]: Camera Start...!
[INFO]: Camera started...!
[INFO]:    Capturing frames for 2 seconds...
[INFO]: Camera stopped
    âœ“ RGB888: 0 frames captured
5.3. Testing MJPEG format...
[1:34:46.505821264] [786]  INFO Camera camera_manager.cpp:327 libcamera v0.4.0+dirty (2025-12-07T15:39:35UTC)
[1:34:46.548695643] [839]  WARN RPiSdn sdn.cpp:40 Using legacy SDN tuning - please consider moving SDN inside rpi.denoise
[1:34:46.550866402] [839]  INFO RPI vc4.cpp:401 Registered camera /base/soc/i2c0mux/i2c@1/ov5647@36 to Unicam device /dev/media4 and ISP device /dev/media0
Find camera: /base/soc/i2c0mux/i2c@1/ov5647@36
[INFO]: Camera configuration adjusted by libcamera!
[1:34:46.551457244] [786]  INFO Camera camera.cpp:1202 configuring streams: (0) 640x480-YUYV
[1:34:46.551832479] [839]  INFO RPI vc4.cpp:570 Sensor: /base/soc/i2c0mux/i2c@1/ov5647@36 - Selected sensor format: 640x480-SGBRG10_1X10 - Selected unicam format: 640x480-pGAA
[INFO]: Camera configuration!
[INFO]: Allocate buffers...!

Camera created: 640x480
[INFO]: Camera Start...!
[INFO]: Camera started...!
[INFO]:    Capturing frames for 2 seconds...
[INFO]: Camera stopped
    âœ“ MJPEG: 26 frames captured
    âœ“ All formats work independently
 âœ“ PASSED

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  âœ“ ALL FORMAT TESTS PASSED             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

======================================================================================================================================
root@raspberrypi4-64:~/workspace# ./test_wrapper_controls 
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  RPI Camera - Control Tests            â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

=== TEST 1: Brightness Control ===
[3:35:56.245878227] [1937]  INFO Camera camera_manager.cpp:327 libcamera v0.4.0+dirty (2025-12-07T15:39:35UTC)
[3:35:56.282351677] [1938]  WARN RPiSdn sdn.cpp:40 Using legacy SDN tuning - please consider moving SDN inside rpi.denoise
[3:35:56.285265305] [1938]  INFO RPI vc4.cpp:401 Registered camera /base/soc/i2c0mux/i2c@1/ov5647@36 to Unicam device /dev/media4 and ISP device /dev/media0
Find camera: /base/soc/i2c0mux/i2c@1/ov5647@36
[INFO]: Camera config validate!
[3:35:56.285812275] [1937]  INFO Camera camera.cpp:1202 configuring streams: (0) 640x480-YUV420
[3:35:56.286185749] [1938]  INFO RPI vc4.cpp:570 Sensor: /base/soc/i2c0mux/i2c@1/ov5647@36 - Selected sensor format: 640x480-SGBRG10_1X10 - Selected unicam format: 640x480-pGAA
[INFO]: Camera configuration!
[INFO]: Allocate buffers...!

Camera created: 640x480
1.1. Testing brightness: Dark (-0.5)...
[INFO]: Camera Start...!
[INFO]: Camera started...!
[DEBUG] Request completed! Status: 1 Cookie: 1
[INFO]: First frame received after 380ms
[DEBUG] Request completed! Status: 1 Cookie: 1
[DEBUG] Request completed! Status: 1 Cookie: 1
[DEBUG] Request completed! Status: 1 Cookie: 1
[DEBUG] Request completed! Status: 1 Cookie: 1
[DEBUG] Request completed! Status: 1 Cookie: 1
[DEBUG] Request completed! Status: 1 Cookie: 1
[DEBUG] Request completed! Status: 1 Cookie: 1
[DEBUG] Request completed! Status: 1 Cookie: 1
[DEBUG] Request completed! Status: 1 Cookie: 1
[DEBUG] Request completed! Status: 1 Cookie: 1
[DEBUG] Request completed! Status: 1 Cookie: 1
[DEBUG] Request completed! Status: 1 Cookie: 1
[DEBUG] Request completed! Status: 1 Cookie: 1
[DEBUG] Request completed! Status: 1 Cookie: 1
[DEBUG] Request completed! Status: 1 Cookie: 1
[DEBUG] Request completed! Status: 1 Cookie: 1
[DEBUG] Request completed! Status: 1 Cookie: 1
[DEBUG] Request completed! Status: 1 Cookie: 1
[DEBUG] Request cancelled. Cookie: 1
[DEBUG] Request cancelled. Cookie: 1
[DEBUG] Request cancelled. Cookie: 1
[DEBUG] Request cancelled. Cookie: 1
[INFO]: Camera stopped
    Statistics:
      - Frames: 18
      - Samples: 10
      - Avg brightness: 149/255
1.2. Testing brightness: Normal (0.0)...
[INFO]: Camera Start...!
[INFO]: Camera started...!
[DEBUG] Request completed! Status: 1 Cookie: 1
[INFO]: First frame received after 130ms
[DEBUG] Request completed! Status: 1 Cookie: 1
[DEBUG] Request completed! Status: 1 Cookie: 1
[DEBUG] Request completed! Status: 1 Cookie: 1
[DEBUG] Request completed! Status: 1 Cookie: 1
[DEBUG] Request completed! Status: 1 Cookie: 1
[DEBUG] Request completed! Status: 1 Cookie: 1
[DEBUG] Request completed! Status: 1 Cookie: 1
[DEBUG] Request completed! Status: 1 Cookie: 1
[DEBUG] Request completed! Status: 1 Cookie: 1
[DEBUG] Request completed! Status: 1 Cookie: 1
[DEBUG] Request completed! Status: 1 Cookie: 1
[DEBUG] Request completed! Status: 1 Cookie: 1
[DEBUG] Request completed! Status: 1 Cookie: 1
[DEBUG] Request completed! Status: 1 Cookie: 1
[DEBUG] Request completed! Status: 1 Cookie: 1
[DEBUG] Request completed! Status: 1 Cookie: 1
[DEBUG] Request completed! Status: 1 Cookie: 1
[DEBUG] Request cancelled. Cookie: 1
[DEBUG] Request cancelled. Cookie: 1
[DEBUG] Request cancelled. Cookie: 1
[DEBUG] Request cancelled. Cookie: 1
[INFO]: Camera stopped
    Statistics:
      - Frames: 17
      - Samples: 10
      - Avg brightness: 152/255
    âœ“ Brightness control working
1.3. Testing brightness: Bright (0.5)...
[INFO]: Camera Start...!
[INFO]: Camera started...!
[DEBUG] Request completed! Status: 1 Cookie: 1
[INFO]: First frame received after 130ms
[DEBUG] Request completed! Status: 1 Cookie: 1
[DEBUG] Request completed! Status: 1 Cookie: 1
[DEBUG] Request completed! Status: 1 Cookie: 1
[DEBUG] Request completed! Status: 1 Cookie: 1
[DEBUG] Request completed! Status: 1 Cookie: 1
[DEBUG] Request completed! Status: 1 Cookie: 1
[DEBUG] Request completed! Status: 1 Cookie: 1
[DEBUG] Request completed! Status: 1 Cookie: 1
[DEBUG] Request completed! Status: 1 Cookie: 1
[DEBUG] Request completed! Status: 1 Cookie: 1
[DEBUG] Request completed! Status: 1 Cookie: 1
[DEBUG] Request completed! Status: 1 Cookie: 1
[DEBUG] Request completed! Status: 1 Cookie: 1
[DEBUG] Request completed! Status: 1 Cookie: 1
[DEBUG] Request cancelled. Cookie: 1
[DEBUG] Request cancelled. Cookie: 1
[DEBUG] Request cancelled. Cookie: 1
[DEBUG] Request cancelled. Cookie: 1
[INFO]: Camera stopped
    Statistics:
      - Frames: 14
      - Samples: 10
      - Avg brightness: 153/255
    âœ“ Brightness control working

=== TEST 2: Contrast Control ===
[3:36:00.085032686] [1937]  INFO Camera camera_manager.cpp:327 libcamera v0.4.0+dirty (2025-12-07T15:39:35UTC)
[3:36:00.127253690] [1945]  WARN RPiSdn sdn.cpp:40 Using legacy SDN tuning - please consider moving SDN inside rpi.denoise
[3:36:00.129488609] [1945]  INFO RPI vc4.cpp:401 Registered camera /base/soc/i2c0mux/i2c@1/ov5647@36 to Unicam device /dev/media4 and ISP device /dev/media0
Find camera: /base/soc/i2c0mux/i2c@1/ov5647@36
[INFO]: Camera config validate!
[3:36:00.130144688] [1937]  INFO Camera camera.cpp:1202 configuring streams: (0) 640x480-YUV420
[3:36:00.130550717] [1945]  INFO RPI vc4.cpp:570 Sensor: /base/soc/i2c0mux/i2c@1/ov5647@36 - Selected sensor format: 640x480-SGBRG10_1X10 - Selected unicam format: 640x480-pGAA
[INFO]: Camera configuration!
[INFO]: Allocate buffers...!

Camera created: 640x480
2.1. Testing contrast: Low (0.5)...
[INFO]: Camera Start...!
[INFO]: Camera started...!
[DEBUG] Request completed! Status: 1 Cookie: 2
[INFO]: First frame received after 380ms
[DEBUG] Request completed! Status: 1 Cookie: 2
[DEBUG] Request completed! Status: 1 Cookie: 2
[DEBUG] Request completed! Status: 1 Cookie: 2
[DEBUG] Request completed! Status: 1 Cookie: 2
[DEBUG] Request completed! Status: 1 Cookie: 2
[DEBUG] Request completed! Status: 1 Cookie: 2
[DEBUG] Request completed! Status: 1 Cookie: 2
[DEBUG] Request completed! Status: 1 Cookie: 2
[DEBUG] Request completed! Status: 1 Cookie: 2
[DEBUG] Request completed! Status: 1 Cookie: 2
[DEBUG] Request completed! Status: 1 Cookie: 2
[DEBUG] Request completed! Status: 1 Cookie: 2
[DEBUG] Request completed! Status: 1 Cookie: 2
[DEBUG] Request completed! Status: 1 Cookie: 2
[DEBUG] Request completed! Status: 1 Cookie: 2
[DEBUG] Request completed! Status: 1 Cookie: 2
[DEBUG] Request completed! Status: 1 Cookie: 2
[DEBUG] Request completed! Status: 1 Cookie: 2
[DEBUG] Request cancelled. Cookie: 2
[DEBUG] Request cancelled. Cookie: 2
[DEBUG] Request cancelled. Cookie: 2
[DEBUG] Request cancelled. Cookie: 2
[INFO]: Camera stopped
    Statistics:
      - Frames: 18
    âœ“ Contrast set successfully
2.2. Testing contrast: Normal (1.0)...
[INFO]: Camera Start...!
[INFO]: Camera started...!
[DEBUG] Request completed! Status: 1 Cookie: 2
[INFO]: First frame received after 130ms
[DEBUG] Request completed! Status: 1 Cookie: 2
[DEBUG] Request completed! Status: 1 Cookie: 2
[DEBUG] Request completed! Status: 1 Cookie: 2
[DEBUG] Request completed! Status: 1 Cookie: 2
[DEBUG] Request completed! Status: 1 Cookie: 2
[DEBUG] Request completed! Status: 1 Cookie: 2
[DEBUG] Request completed! Status: 1 Cookie: 2
[DEBUG] Request completed! Status: 1 Cookie: 2
[DEBUG] Request completed! Status: 1 Cookie: 2
[DEBUG] Request completed! Status: 1 Cookie: 2
[DEBUG] Request completed! Status: 1 Cookie: 2
[DEBUG] Request completed! Status: 1 Cookie: 2
[DEBUG] Request completed! Status: 1 Cookie: 2
[DEBUG] Request completed! Status: 1 Cookie: 2
[DEBUG] Request completed! Status: 1 Cookie: 2
[DEBUG] Request completed! Status: 1 Cookie: 2
[DEBUG] Request completed! Status: 1 Cookie: 2
[DEBUG] Request cancelled. Cookie: 2
[DEBUG] Request cancelled. Cookie: 2
[DEBUG] Request cancelled. Cookie: 2
[DEBUG] Request cancelled. Cookie: 2
[INFO]: Camera stopped
    Statistics:
      - Frames: 17
    âœ“ Contrast set successfully
2.3. Testing contrast: High (1.5)...
[INFO]: Camera Start...!
[INFO]: Camera started...!
[DEBUG] Request completed! Status: 1 Cookie: 2
[INFO]: First frame received after 130ms
[DEBUG] Request completed! Status: 1 Cookie: 2
[DEBUG] Request completed! Status: 1 Cookie: 2
[DEBUG] Request completed! Status: 1 Cookie: 2
[DEBUG] Request completed! Status: 1 Cookie: 2
[DEBUG] Request completed! Status: 1 Cookie: 2
[DEBUG] Request completed! Status: 1 Cookie: 2
[DEBUG] Request completed! Status: 1 Cookie: 2
[DEBUG] Request completed! Status: 1 Cookie: 2
[DEBUG] Request completed! Status: 1 Cookie: 2
[DEBUG] Request completed! Status: 1 Cookie: 2
[DEBUG] Request completed! Status: 1 Cookie: 2
[DEBUG] Request completed! Status: 1 Cookie: 2
[DEBUG] Request completed! Status: 1 Cookie: 2
[DEBUG] Request completed! Status: 1 Cookie: 2
[DEBUG] Request completed! Status: 1 Cookie: 2
[DEBUG] Request completed! Status: 1 Cookie: 2
[DEBUG] Request completed! Status: 1 Cookie: 2
[DEBUG] Request cancelled. Cookie: 2
[DEBUG] Request cancelled. Cookie: 2
[DEBUG] Request cancelled. Cookie: 2
[DEBUG] Request cancelled. Cookie: 2
[INFO]: Camera stopped
    Statistics:
      - Frames: 17
    âœ“ Contrast set successfully

=== TEST 3: Exposure Control ===
[3:36:04.107604260] [1937]  INFO Camera camera_manager.cpp:327 libcamera v0.4.0+dirty (2025-12-07T15:39:35UTC)
[3:36:04.149043132] [1951]  WARN RPiSdn sdn.cpp:40 Using legacy SDN tuning - please consider moving SDN inside rpi.denoise
[3:36:04.151173127] [1951]  INFO RPI vc4.cpp:401 Registered camera /base/soc/i2c0mux/i2c@1/ov5647@36 to Unicam device /dev/media4 and ISP device /dev/media0
Find camera: /base/soc/i2c0mux/i2c@1/ov5647@36
[INFO]: Camera config validate!
[3:36:04.151799448] [1937]  INFO Camera camera.cpp:1202 configuring streams: (0) 640x480-YUV420
[3:36:04.152187885] [1951]  INFO RPI vc4.cpp:570 Sensor: /base/soc/i2c0mux/i2c@1/ov5647@36 - Selected sensor format: 640x480-SGBRG10_1X10 - Selected unicam format: 640x480-pGAA
[INFO]: Camera configuration!
[INFO]: Allocate buffers...!

Camera created: 640x480
3.1. Testing exposure: Short (5ms)...
[INFO]: Camera Start...!
[INFO]: Camera started...!
[DEBUG] Request completed! Status: 1 Cookie: 3
[INFO]: First frame received after 380ms
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request cancelled. Cookie: 3
[DEBUG] Request cancelled. Cookie: 3
[DEBUG] Request cancelled. Cookie: 3
[DEBUG] Request cancelled. Cookie: 3
[INFO]: Camera stopped
    Statistics:
      - Frames: 35
      - Avg brightness: 149/255
    âœ“ Exposure set successfully
3.2. Testing exposure: Normal (10ms)...
[INFO]: Camera Start...!
[INFO]: Camera started...!
[DEBUG] Request completed! Status: 1 Cookie: 3
[INFO]: First frame received after 130ms
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request cancelled. Cookie: 3
[DEBUG] Request cancelled. Cookie: 3
[DEBUG] Request cancelled. Cookie: 3
[DEBUG] Request cancelled. Cookie: 3
[INFO]: Camera stopped
    Statistics:
      - Frames: 31
      - Avg brightness: 153/255
    âœ“ Exposure set successfully
3.3. Testing exposure: Long (20ms)...
[INFO]: Camera Start...!
[INFO]: Camera started...!
[DEBUG] Request completed! Status: 1 Cookie: 3
[INFO]: First frame received after 120ms
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request completed! Status: 1 Cookie: 3
[DEBUG] Request cancelled. Cookie: 3
[DEBUG] Request cancelled. Cookie: 3
[DEBUG] Request cancelled. Cookie: 3
[DEBUG] Request cancelled. Cookie: 3
[INFO]: Camera stopped
    Statistics:
      - Frames: 35
      - Avg brightness: 153/255
    âœ“ Exposure set successfully

=== TEST 4: Gain Control ===
[3:36:10.907617210] [1937]  INFO Camera camera_manager.cpp:327 libcamera v0.4.0+dirty (2025-12-07T15:39:35UTC)
[3:36:10.949219931] [1957]  WARN RPiSdn sdn.cpp:40 Using legacy SDN tuning - please consider moving SDN inside rpi.denoise
[3:36:10.951318631] [1957]  INFO RPI vc4.cpp:401 Registered camera /base/soc/i2c0mux/i2c@1/ov5647@36 to Unicam device /dev/media4 and ISP device /dev/media0
Find camera: /base/soc/i2c0mux/i2c@1/ov5647@36
[INFO]: Camera config validate!
[3:36:10.951866509] [1937]  INFO Camera camera.cpp:1202 configuring streams: (0) 640x480-YUV420
[3:36:10.952259409] [1957]  INFO RPI vc4.cpp:570 Sensor: /base/soc/i2c0mux/i2c@1/ov5647@36 - Selected sensor format: 640x480-SGBRG10_1X10 - Selected unicam format: 640x480-pGAA
[INFO]: Camera configuration!
[INFO]: Allocate buffers...!

Camera created: 640x480
4.1. Testing gain: Low (1.0)...
[INFO]: Camera Start...!
[INFO]: Camera started...!
[DEBUG] Request completed! Status: 1 Cookie: 4
[INFO]: First frame received after 380ms
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request cancelled. Cookie: 4
[DEBUG] Request cancelled. Cookie: 4
[DEBUG] Request cancelled. Cookie: 4
[DEBUG] Request cancelled. Cookie: 4
[INFO]: Camera stopped
    Statistics:
      - Frames: 27
    âœ“ Gain set successfully
4.2. Testing gain: Medium (4.0)...
[INFO]: Camera Start...!
[INFO]: Camera started...!
[DEBUG] Request completed! Status: 1 Cookie: 4
[INFO]: First frame received after 130ms
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request cancelled. Cookie: 4
[DEBUG] Request cancelled. Cookie: 4
[DEBUG] Request cancelled. Cookie: 4
[DEBUG] Request cancelled. Cookie: 4
[INFO]: Camera stopped
    Statistics:
      - Frames: 35
    âœ“ Gain set successfully
4.3. Testing gain: High (8.0)...
[INFO]: Camera Start...!
[INFO]: Camera started...!
[DEBUG] Request completed! Status: 1 Cookie: 4
[INFO]: First frame received after 130ms
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request completed! Status: 1 Cookie: 4
[DEBUG] Request cancelled. Cookie: 4
[DEBUG] Request cancelled. Cookie: 4
[DEBUG] Request cancelled. Cookie: 4
[DEBUG] Request cancelled. Cookie: 4
[INFO]: Camera stopped
    Statistics:
      - Frames: 32
    âœ“ Gain set successfully

=== TEST 5: Combined Controls ===
[3:36:17.264732915] [1937]  INFO Camera camera_manager.cpp:327 libcamera v0.4.0+dirty (2025-12-07T15:39:35UTC)
[3:36:17.307320081] [1963]  WARN RPiSdn sdn.cpp:40 Using legacy SDN tuning - please consider moving SDN inside rpi.denoise
[3:36:17.309578500] [1963]  INFO RPI vc4.cpp:401 Registered camera /base/soc/i2c0mux/i2c@1/ov5647@36 to Unicam device /dev/media4 and ISP device /dev/media0
Find camera: /base/soc/i2c0mux/i2c@1/ov5647@36
[INFO]: Camera config validate!
[3:36:17.310097397] [1937]  INFO Camera camera.cpp:1202 configuring streams: (0) 640x480-YUV420
[3:36:17.310463149] [1963]  INFO RPI vc4.cpp:570 Sensor: /base/soc/i2c0mux/i2c@1/ov5647@36 - Selected sensor format: 640x480-SGBRG10_1X10 - Selected unicam format: 640x480-pGAA
[INFO]: Camera configuration!
[INFO]: Allocate buffers...!

Camera created: 640x480
5.1. Setting all controls...
    âœ“ All controls set
[INFO]: Camera Start...!
[INFO]: Camera started...!
[DEBUG] Request completed! Status: 1 Cookie: 5
[INFO]: First frame received after 380ms
5.2. Capturing with combined controls...
[DEBUG] Request completed! Status: 1 Cookie: 5
[DEBUG] Request completed! Status: 1 Cookie: 5
[DEBUG] Request completed! Status: 1 Cookie: 5
[DEBUG] Request completed! Status: 1 Cookie: 5
[DEBUG] Request completed! Status: 1 Cookie: 5
[DEBUG] Request completed! Status: 1 Cookie: 5
[DEBUG] Request completed! Status: 1 Cookie: 5
[DEBUG] Request completed! Status: 1 Cookie: 5
[DEBUG] Request completed! Status: 1 Cookie: 5
[DEBUG] Request completed! Status: 1 Cookie: 5
[DEBUG] Request completed! Status: 1 Cookie: 5
[DEBUG] Request completed! Status: 1 Cookie: 5
[DEBUG] Request completed! Status: 1 Cookie: 5
[DEBUG] Request completed! Status: 1 Cookie: 5
[DEBUG] Request completed! Status: 1 Cookie: 5
[DEBUG] Request completed! Status: 1 Cookie: 5
[DEBUG] Request completed! Status: 1 Cookie: 5
[DEBUG] Request completed! Status: 1 Cookie: 5
[DEBUG] Request completed! Status: 1 Cookie: 5
[DEBUG] Request completed! Status: 1 Cookie: 5
[DEBUG] Request completed! Status: 1 Cookie: 5
[DEBUG] Request completed! Status: 1 Cookie: 5
[DEBUG] Request completed! Status: 1 Cookie: 5
[DEBUG] Request completed! Status: 1 Cookie: 5
[DEBUG] Request completed! Status: 1 Cookie: 5
[DEBUG] Request completed! Status: 1 Cookie: 5
[DEBUG] Request completed! Status: 1 Cookie: 5
[DEBUG] Request completed! Status: 1 Cookie: 5
[DEBUG] Request completed! Status: 1 Cookie: 5
[DEBUG] Request completed! Status: 1 Cookie: 5
[DEBUG] Request completed! Status: 1 Cookie: 5
[DEBUG] Request completed! Status: 1 Cookie: 5
[DEBUG] Request completed! Status: 1 Cookie: 5
[DEBUG] Request completed! Status: 1 Cookie: 5
[DEBUG] Request completed! Status: 1 Cookie: 5
[DEBUG] Request cancelled. Cookie: 5
[DEBUG] Request cancelled. Cookie: 5
[DEBUG] Request cancelled. Cookie: 5
[DEBUG] Request cancelled. Cookie: 5
[INFO]: Camera stopped
    Statistics:
      - Frames: 35
    âœ“ Combined controls work together

=== TEST 6: Dynamic Control Changes ===
[3:36:19.808535172] [1937]  INFO Camera camera_manager.cpp:327 libcamera v0.4.0+dirty (2025-12-07T15:39:35UTC)
[3:36:19.852624661] [1967]  WARN RPiSdn sdn.cpp:40 Using legacy SDN tuning - please consider moving SDN inside rpi.denoise
[3:36:19.854772063] [1967]  INFO RPI vc4.cpp:401 Registered camera /base/soc/i2c0mux/i2c@1/ov5647@36 to Unicam device /dev/media4 and ISP device /dev/media0
Find camera: /base/soc/i2c0mux/i2c@1/ov5647@36
[INFO]: Camera config validate!
[3:36:19.855354181] [1937]  INFO Camera camera.cpp:1202 configuring streams: (0) 640x480-YUV420
[3:36:19.855731748] [1967]  INFO RPI vc4.cpp:570 Sensor: /base/soc/i2c0mux/i2c@1/ov5647@36 - Selected sensor format: 640x480-SGBRG10_1X10 - Selected unicam format: 640x480-pGAA
[INFO]: Camera configuration!
[INFO]: Allocate buffers...!

Camera created: 640x480
[INFO]: Camera Start...!
[INFO]: Camera started...!
[DEBUG] Request completed! Status: 1 Cookie: 6
[INFO]: First frame received after 380ms
6.1. Changing brightness while capturing...
    Set brightness to -0.5
[DEBUG] Request completed! Status: 1 Cookie: 6
[DEBUG] Request completed! Status: 1 Cookie: 6
[DEBUG] Request completed! Status: 1 Cookie: 6
[DEBUG] Request completed! Status: 1 Cookie: 6
[DEBUG] Request completed! Status: 1 Cookie: 6
[DEBUG] Request completed! Status: 1 Cookie: 6
[DEBUG] Request completed! Status: 1 Cookie: 6
[DEBUG] Request completed! Status: 1 Cookie: 6
[DEBUG] Request completed! Status: 1 Cookie: 6
[DEBUG] Request completed! Status: 1 Cookie: 6
[DEBUG] Request completed! Status: 1 Cookie: 6
[DEBUG] Request completed! Status: 1 Cookie: 6
[DEBUG] Request completed! Status: 1 Cookie: 6
[DEBUG] Request completed! Status: 1 Cookie: 6
[DEBUG] Request completed! Status: 1 Cookie: 6
[DEBUG] Request completed! Status: 1 Cookie: 6
[DEBUG] Request completed! Status: 1 Cookie: 6
[DEBUG] Request completed! Status: 1 Cookie: 6
    Set brightness to 0.0
[DEBUG] Request completed! Status: 1 Cookie: 6
[DEBUG] Request completed! Status: 1 Cookie: 6
[DEBUG] Request completed! Status: 1 Cookie: 6
    Set brightness to 0.5
[DEBUG] Request completed! Status: 1 Cookie: 6
[DEBUG] Request completed! Status: 1 Cookie: 6
[DEBUG] Request completed! Status: 1 Cookie: 6
[DEBUG] Request completed! Status: 1 Cookie: 6
[DEBUG] Request completed! Status: 1 Cookie: 6
[DEBUG] Request completed! Status: 1 Cookie: 6
[DEBUG] Request completed! Status: 1 Cookie: 6
[DEBUG] Request completed! Status: 1 Cookie: 6
[DEBUG] Request completed! Status: 1 Cookie: 6
[DEBUG] Request completed! Status: 1 Cookie: 6
[DEBUG] Request completed! Status: 1 Cookie: 6
[DEBUG] Request completed! Status: 1 Cookie: 6
[DEBUG] Request completed! Status: 1 Cookie: 6
[DEBUG] Request completed! Status: 1 Cookie: 6
[DEBUG] Request completed! Status: 1 Cookie: 6
[DEBUG] Request completed! Status: 1 Cookie: 6
[DEBUG] Request completed! Status: 1 Cookie: 6
[DEBUG] Request completed! Status: 1 Cookie: 6
    âœ“ Dynamic changes work
[DEBUG] Request cancelled. Cookie: 6
[DEBUG] Request cancelled. Cookie: 6
[DEBUG] Request cancelled. Cookie: 6
[DEBUG] Request cancelled. Cookie: 6
[INFO]: Camera stopped
    Total frames: 39

=== TEST 7: Invalid Control Values ===
[3:36:22.557216737] [1937]  INFO Camera camera_manager.cpp:327 libcamera v0.4.0+dirty (2025-12-07T15:39:35UTC)
[3:36:22.599166471] [1971]  WARN RPiSdn sdn.cpp:40 Using legacy SDN tuning - please consider moving SDN inside rpi.denoise
[3:36:22.601364725] [1971]  INFO RPI vc4.cpp:401 Registered camera /base/soc/i2c0mux/i2c@1/ov5647@36 to Unicam device /dev/media4 and ISP device /dev/media0
Find camera: /base/soc/i2c0mux/i2c@1/ov5647@36
[INFO]: Camera config validate!
[3:36:22.601888881] [1937]  INFO Camera camera.cpp:1202 configuring streams: (0) 640x480-YUV420
[3:36:22.602298354] [1971]  INFO RPI vc4.cpp:570 Sensor: /base/soc/i2c0mux/i2c@1/ov5647@36 - Selected sensor format: 640x480-SGBRG10_1X10 - Selected unicam format: 640x480-pGAA
[INFO]: Camera configuration!
[INFO]: Allocate buffers...!

Camera created: 640x480
7.1. Testing extreme brightness values...
[WARN] Brightness -2.00 out of range, clamped to -1.00
[WARN] Brightness 2.00 out of range, clamped to 1.00
    âœ“ Invalid values handled gracefully (no crash, camera still streams)
7.2. Testing extreme contrast values...
[WARN] Contrast -1.00 out of range, clamped to 0.00
    âœ“ Invalid values handled gracefully (no crash, camera still streams)
7.3. Testing extreme gain values...
[WARN] Gain 0.10 out of range, clamped to 1.00
[WARN] Gain 100.00 out of range, clamped to 63.94
    âœ“ Invalid values handled gracefully (no crash, camera still streams)
[INFO]: Camera Start...!
[INFO]: Camera started...!
[DEBUG] Request completed! Status: 1 Cookie: 7
[INFO]: First frame received after 380ms
[DEBUG] Request completed! Status: 1 Cookie: 7
[DEBUG] Request completed! Status: 1 Cookie: 7
[DEBUG] Request completed! Status: 1 Cookie: 7
[DEBUG] Request completed! Status: 1 Cookie: 7
[DEBUG] Request completed! Status: 1 Cookie: 7
[DEBUG] Request completed! Status: 1 Cookie: 7
[DEBUG] Request completed! Status: 1 Cookie: 7
[DEBUG] Request completed! Status: 1 Cookie: 7
[DEBUG] Request completed! Status: 1 Cookie: 7
[DEBUG] Request completed! Status: 1 Cookie: 7
[DEBUG] Request completed! Status: 1 Cookie: 7
[DEBUG] Request completed! Status: 1 Cookie: 7
[DEBUG] Request completed! Status: 1 Cookie: 7
[DEBUG] Request completed! Status: 1 Cookie: 7
[DEBUG] Request completed! Status: 1 Cookie: 7
[DEBUG] Request completed! Status: 1 Cookie: 7
[DEBUG] Request completed! Status: 1 Cookie: 7
[DEBUG] Request completed! Status: 1 Cookie: 7
[DEBUG] Request cancelled. Cookie: 7
[DEBUG] Request cancelled. Cookie: 7
[DEBUG] Request cancelled. Cookie: 7
[DEBUG] Request cancelled. Cookie: 7
[INFO]: Camera stopped
    Camera still works: 18 frames

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  âœ“ ALL CONTROL TESTS PASSED            â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
