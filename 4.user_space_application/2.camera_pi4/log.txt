adonisking@adonisking-Nitro-AN515-55:~$ ssh root@10.42.0.154

WARNING: Poky is a reference Yocto Project distribution that should be used for
testing and development purposes only. It is recommended that you create your
own distribution for production use.

root@raspberrypi4-64:~# 
root@raspberrypi4-64:~# 
root@raspberrypi4-64:~# cd ~/workspace/
root@raspberrypi4-64:~/workspace# ls
camera_test  frame_001.yuv  test.jpg  test_image.jpg  test_video.yuv
root@raspberrypi4-64:~/workspace# ls
camera_test	   test.jpg	   test_wrapper_basic	  test_wrapper_stress
frame_001.yuv	   test_image.jpg  test_wrapper_controls
sample_camera_app  test_video.yuv  test_wrapper_formats
root@raspberrypi4-64:~/workspace# ./test_wrapper_basic 
./test_wrapper_basic: error while loading shared libraries: librpi_camera_wrapper.so: cannot open shared object file: No such file or directory
root@raspberrypi4-64:~/workspace# ls
camera_test		  test.jpg	      test_wrapper_controls
frame_001.yuv		  test_image.jpg      test_wrapper_formats
librpi_camera_wrapper.so  test_video.yuv      test_wrapper_stress
sample_camera_app	  test_wrapper_basic
root@raspberrypi4-64:~/workspace# ls -lah
total 28M
drwxr-xr-x 2 root root 4.0K Jan 13 16:24 .
drwx------ 4 root root 4.0K Jan 11 17:01 ..
-rwxr-xr-x 1 root root 102K Jan 11 17:00 camera_test
-rw-r--r-- 1 root root 450K Jan 11 17:11 frame_001.yuv
-rwxr-xr-x 1 root root 968K Jan 13 16:24 librpi_camera_wrapper.so
-rwxr-xr-x 1 root root 109K Jan 13 16:24 sample_camera_app
-rw-r--r-- 1 root root 1.2M Jan  6 16:09 test.jpg
-rw-r--r-- 1 root root  98K Jan 11 17:11 test_image.jpg
-rw-r--r-- 1 root root  25M Jan 11 17:11 test_video.yuv
-rwxr-xr-x 1 root root  89K Jan 13 16:24 test_wrapper_basic
-rwxr-xr-x 1 root root  95K Jan 13 16:24 test_wrapper_controls
-rwxr-xr-x 1 root root  91K Jan 13 16:24 test_wrapper_formats
-rwxr-xr-x 1 root root  97K Jan 13 16:24 test_wrapper_stress
root@raspberrypi4-64:~/workspace# ./test_wrapper_basic 
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë  RPI Camera Wrapper - Basic Tests     ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù

=== TEST 1: Create & Destroy ===
1.1. Creating camera 640x480 YUV420...
[0:02:26.632521901] [463]  INFO Camera camera_manager.cpp:327 libcamera v0.4.0+dirty (2025-12-07T15:39:35UTC)
[0:02:26.749885993] [464]  WARN RPiSdn sdn.cpp:40 Using legacy SDN tuning - please consider moving SDN inside rpi.denoise
[0:02:26.753396528] [464]  INFO RPI vc4.cpp:401 Registered camera /base/soc/i2c0mux/i2c@1/ov5647@36 to Unicam device /dev/media4 and ISP device /dev/media0
[0:02:26.754157787] [463]  INFO Camera camera.cpp:1202 configuring streams: (0) 640x480-YUV420
[0:02:26.754709435] [464]  INFO RPI vc4.cpp:570 Sensor: /base/soc/i2c0mux/i2c@1/ov5647@36 - Selected sensor format: 640x480-SGBRG10_1X10 - Selected unicam format: 640x480-pGAA
Camera created: 640x480
    ‚úì Camera created successfully
1.2. Destroying camera...
[0:02:26.758030100] [464] ERROR DeviceEnumerator device_enumerator.cpp:172 Removing media device /dev/media0 while still in use
[0:02:26.758099600] [464] ERROR DeviceEnumerator device_enumerator.cpp:172 Removing media device /dev/media4 while still in use
Segmentation fault (core dumped)
root@raspberrypi4-64:~/workspace# ./test_wrapper_      
test_wrapper_basic     test_wrapper_controls  test_wrapper_formats   test_wrapper_stress
root@raspberrypi4-64:~/workspace# ./test_wrapper_formats 
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë  RPI Camera - Format Tests             ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù

=== TEST 1: YUV420 Format ===
1.1. Testing YUV420 640x480...
[0:04:20.709756228] [468]  INFO Camera camera_manager.cpp:327 libcamera v0.4.0+dirty (2025-12-07T15:39:35UTC)
[0:04:20.748126794] [469]  WARN RPiSdn sdn.cpp:40 Using legacy SDN tuning - please consider moving SDN inside rpi.denoise
[0:04:20.750277608] [469]  INFO RPI vc4.cpp:401 Registered camera /base/soc/i2c0mux/i2c@1/ov5647@36 to Unicam device /dev/media4 and ISP device /dev/media0
[0:04:20.750788604] [468]  INFO Camera camera.cpp:1202 configuring streams: (0) 640x480-YUV420
[0:04:20.751131348] [469]  INFO RPI vc4.cpp:570 Sensor: /base/soc/i2c0mux/i2c@1/ov5647@36 - Selected sensor format: 640x480-SGBRG10_1X10 - Selected unicam format: 640x480-pGAA
Camera created: 640x480
Camera started
Camera stopped
    Statistics:
      - Frames: 25
      - FPS: 16.55
      - Avg size: 307200 bytes
      - Min size: 307200 bytes
      - Max size: 307200 bytes
      - Expected: 460800 bytes
test_wrapper_formats: /home/adonisking/workspace/1.raspi-4/Personal-project/4.user_space_application/2.camera_pi4/test/test_wrapper/test_formats.c:88: test_yuv420: Assertion `stats.frame_count >= 40' failed.
Aborted (core dumped)
root@raspberrypi4-64:~/workspace# ./test_wrapper_controls 
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë  RPI Camera - Control Tests            ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù

=== TEST 1: Brightness Control ===
[0:04:45.553666307] [474]  INFO Camera camera_manager.cpp:327 libcamera v0.4.0+dirty (2025-12-07T15:39:35UTC)
[0:04:45.592818948] [475]  WARN RPiSdn sdn.cpp:40 Using legacy SDN tuning - please consider moving SDN inside rpi.denoise
[0:04:45.595062162] [475]  INFO RPI vc4.cpp:401 Registered camera /base/soc/i2c0mux/i2c@1/ov5647@36 to Unicam device /dev/media4 and ISP device /dev/media0
[0:04:45.595530220] [474]  INFO Camera camera.cpp:1202 configuring streams: (0) 640x480-YUV420
[0:04:45.595899759] [475]  INFO RPI vc4.cpp:570 Sensor: /base/soc/i2c0mux/i2c@1/ov5647@36 - Selected sensor format: 640x480-SGBRG10_1X10 - Selected unicam format: 640x480-pGAA
Camera created: 640x480
1.1. Testing brightness: Dark (-0.5)...
Camera started
Camera stopped
    Statistics:
      - Frames: 25
      - Samples: 5
      - Avg brightness: 15/255
test_wrapper_controls: /home/adonisking/workspace/1.raspi-4/Personal-project/4.user_space_application/2.camera_pi4/test/test_wrapper/test_controls.c:90: test_brightness: Assertion `stats.frame_count >= 40' failed.
Aborted (core dumped)
root@raspberrypi4-64:~/workspace# ./test_wrapper_stress   
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë  RPI Camera - Stress Tests             ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù

=== TEST 1: Long Running Test (30s) ===
[0:04:57.408720481] [481]  INFO Camera camera_manager.cpp:327 libcamera v0.4.0+dirty (2025-12-07T15:39:35UTC)
[0:04:57.448498753] [482]  WARN RPiSdn sdn.cpp:40 Using legacy SDN tuning - please consider moving SDN inside rpi.denoise
[0:04:57.450701733] [482]  INFO RPI vc4.cpp:401 Registered camera /base/soc/i2c0mux/i2c@1/ov5647@36 to Unicam device /dev/media4 and ISP device /dev/media0
[0:04:57.451197325] [481]  INFO Camera camera.cpp:1202 configuring streams: (0) 640x480-YUV420
[0:04:57.451554196] [482]  INFO RPI vc4.cpp:570 Sensor: /base/soc/i2c0mux/i2c@1/ov5647@36 - Selected sensor format: 640x480-SGBRG10_1X10 - Selected unicam format: 640x480-pGAA
Camera created: 640x480
Camera started
Starting capture for 30 seconds...
Time | Frames | FPS  | Memory (KB)
-----|--------|------|------------
   5s |     73 | 14.6 | 9044
  10s |    152 | 15.2 | 9044
  15s |    232 | 15.5 | 9044
  20s |    311 | 15.6 | 9044
  25s |    412 | 16.5 | 9044
  30s |    491 | 16.4 | 9044
Camera stopped

Results:
  - Total frames: 491
  - Average FPS: 16.37
  - Total data: 143.85 MB
  - Memory growth: 384 KB
test_wrapper_stress: /home/adonisking/workspace/1.raspi-4/Personal-project/4.user_space_application/2.camera_pi4/test/test_wrapper/test_stress.c:73: test_long_running: Assertion `stats.frame_count >= 600' failed.
Aborted (core dumped)
root@raspberrypi4-64:~/workspace# ./sample_camera_app   
./sample_camera_app: error while loading shared libraries: librpi_camera_wrapper.so: cannot open shared object file: No such file or directory
root@raspberrypi4-64:~/workspace# ls
camera_test		  sample_camera_app  test_video.yuv	    test_wrapper_formats
frame_001.yuv		  test.jpg	     test_wrapper_basic     test_wrapper_stress
librpi_camera_wrapper.so  test_image.jpg     test_wrapper_controls
root@raspberrypi4-64:~/workspace# ./sample_camera_app 
./sample_camera_app: error while loading shared libraries: librpi_camera_wrapper.so: cannot open shared object file: No such file or directory
root@raspberrypi4-64:~/workspace# 
root@raspberrypi4-64:~/workspace# 
root@raspberrypi4-64:~/workspace# ./sample_camera_app 

‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë         RPI CAMERA WRAPPER - SAMPLE APPLICATION          ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù

‚Üí Creating output directory: ./captured_frames
‚úì Output directory ready

‚Üí Setting up signal handlers
‚úì Signal handlers installed (Ctrl+C to stop)

‚Üí Creating camera: 1280x720, YUV420
[0:07:53.606158847] [504]  INFO Camera camera_manager.cpp:327 libcamera v0.4.0+dirty (2025-12-07T15:39:35UTC)
[0:07:53.642598696] [505]  WARN RPiSdn sdn.cpp:40 Using legacy SDN tuning - please consider moving SDN inside rpi.denoise
[0:07:53.645059977] [505]  INFO RPI vc4.cpp:401 Registered camera /base/soc/i2c0mux/i2c@1/ov5647@36 to Unicam device /dev/media4 and ISP device /dev/media0
[0:07:53.645702552] [504]  INFO Camera camera.cpp:1202 configuring streams: (0) 1280x720-YUV420
[0:07:53.646157816] [505]  INFO RPI vc4.cpp:570 Sensor: /base/soc/i2c0mux/i2c@1/ov5647@36 - Selected sensor format: 1920x1080-SGBRG10_1X10 - Selected unicam format: 1920x1080-pGAA
Camera created: 1280x720
‚úì Camera created successfully

‚Üí Configuring camera controls
  ‚úì Brightness: 0.00
  ‚úì Contrast: 1.00
  ‚úì Exposure: 10000 ¬µs
  ‚úì Gain: 1.00

‚Üí Starting camera capture
Camera started
‚úì Camera started, capturing frames...
‚Üí Starting interactive control
  (You can adjust settings while capturing)

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
              CAPTURING - Press 'q' to quit
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê


‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ First frame captured!                   ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ Sequence:         8                     ‚îÇ
‚îÇ Size:        921600 bytes               ‚îÇ
‚îÇ Timestamp: 474152355000                         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò


‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ         CAMERA CONTROL MENU               ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ b - Adjust brightness                     ‚îÇ
‚îÇ c - Adjust contrast                       ‚îÇ
‚îÇ e - Adjust exposure                       ‚îÇ
‚îÇ g - Adjust gain                           ‚îÇ
‚îÇ s - Toggle frame saving (ON/OFF)          ‚îÇ
‚îÇ i - Show current settings                 ‚îÇ
‚îÇ q - Quit                                  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
Enter command: Frame    30 | FPS:  15.5 | Size:  921600 B | Avg:  921600 B | Brightness:  34/255
Frame    60 | FPS:  15.2 | Size:  921600 B | Avg:  921600 B | Brightness:  34/255
Frame    90 | FPS:  15.1 | Size:  921600 B | Avg:  921600 B | Brightness:  34/255
bFrame   120 | FPS:  15.1 | Size:  921600 B | Avg:  921600 B | Brightness:  34/255
bbFrame   150 | FPS:  15.1 | Size:  921600 B | Avg:  921600 B | Brightness:  34/255
bbFrame   180 | FPS:  15.1 | Size:  921600 B | Avg:  921600 B | Brightness:  34/255

Enter brightness (-1.0 to 1.0): 
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ         CAMERA CONTROL MENU               ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ b - Adjust brightness                     ‚îÇ
‚îÇ c - Adjust contrast                       ‚îÇ
‚îÇ e - Adjust exposure                       ‚îÇ
‚îÇ g - Adjust gain                           ‚îÇ
‚îÇ s - Toggle frame saving (ON/OFF)          ‚îÇ
‚îÇ i - Show current settings                 ‚îÇ
‚îÇ q - Quit                                  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
Enter command: Enter brightness (-1.0 to 1.0): 
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ         CAMERA CONTROL MENU               ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ b - Adjust brightness                     ‚îÇ
‚îÇ c - Adjust contrast                       ‚îÇ
‚îÇ e - Adjust exposure                       ‚îÇ
‚îÇ g - Adjust gain                           ‚îÇ
‚îÇ s - Toggle frame saving (ON/OFF)          ‚îÇ
‚îÇ i - Show current settings                 ‚îÇ
‚îÇ q - Quit                                  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
Enter command: Enter brightness (-1.0 to 1.0): 
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ         CAMERA CONTROL MENU               ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ b - Adjust brightness                     ‚îÇ
‚îÇ c - Adjust contrast                       ‚îÇ
‚îÇ e - Adjust exposure                       ‚îÇ
‚îÇ g - Adjust gain                           ‚îÇ
‚îÇ s - Toggle frame saving (ON/OFF)          ‚îÇ
‚îÇ i - Show current settings                 ‚îÇ
‚îÇ q - Quit                                  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
Enter command: Enter brightness (-1.0 to 1.0): 
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ         CAMERA CONTROL MENU               ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ b - Adjust brightness                     ‚îÇ
‚îÇ c - Adjust contrast                       ‚îÇ
‚îÇ e - Adjust exposure                       ‚îÇ
‚îÇ g - Adjust gain                           ‚îÇ
‚îÇ s - Toggle frame saving (ON/OFF)          ‚îÇ
‚îÇ i - Show current settings                 ‚îÇ
‚îÇ q - Quit                                  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
Enter command: Enter brightness (-1.0 to 1.0): Frame   210 | FPS:  15.0 | Size:  921600 B | Avg:  921600 B | Brightness:  34/255
Frame   240 | FPS:  15.0 | Size:  921600 B | Avg:  921600 B | Brightness:  34/255
Frame   270 | FPS:  15.0 | Size:  921600 B | Avg:  921600 B | Brightness:  34/255
Frame   300 | FPS:  15.0 | Size:  921600 B | Avg:  921600 B | Brightness:  34/255
Frame   330 | FPS:  15.0 | Size:  921600 B | Avg:  921600 B | Brightness:  34/255
0
‚úì Brightness set to 0.00

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ         CAMERA CONTROL MENU               ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ b - Adjust brightness                     ‚îÇ
‚îÇ c - Adjust contrast                       ‚îÇ
‚îÇ e - Adjust exposure                       ‚îÇ
‚îÇ g - Adjust gain                           ‚îÇ
‚îÇ s - Toggle frame saving (ON/OFF)          ‚îÇ
‚îÇ i - Show current settings                 ‚îÇ
‚îÇ q - Quit                                  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
Enter command: Frame   360 | FPS:  15.0 | Size:  921600 B | Avg:  921600 B | Brightness:  35/255
Frame   390 | FPS:  15.0 | Size:  921600 B | Avg:  921600 B | Brightness:  35/255
Frame   420 | FPS:  15.0 | Size:  921600 B | Avg:  921600 B | Brightness:  35/255
Frame   450 | FPS:  15.0 | Size:  921600 B | Avg:  921600 B | Brightness:  35/255
qFrame   480 | FPS:  15.0 | Size:  921600 B | Avg:  921600 B | Brightness:  35/255

Quitting...

‚Üí Stopping camera
Camera stopped
‚úì Camera stopped

‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë                    CAPTURE STATISTICS                     ‚ïë
‚ï†‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï£
‚ïë Total Frames:          481                                ‚ïë
‚ïë Saved Frames:            0                                ‚ïë
‚ïë Duration:            32.05 seconds                       ‚ïë
‚ïë Average FPS:         15.01                               ‚ïë
‚ï†‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï£
‚ïë Total Data:         422.75 MB                            ‚ïë
‚ïë Average Size:       921600 bytes/frame                   ‚ïë
‚ïë Min Size:           921600 bytes                          ‚ïë
‚ïë Max Size:           921600 bytes                          ‚ïë
‚ï†‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï£
‚ïë Resolution:       1280x720                              ‚ïë
‚ïë Format:           YUV420                                 ‚ïë
‚ï†‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï£
‚ïë Brightness:           0.00                               ‚ïë
‚ïë Contrast:             1.00                               ‚ïë
‚ïë Exposure:            10000 ¬µs                             ‚ïë
‚ïë Gain:                 1.00                               ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù

‚Üí Cleaning up
[0:08:26.292889149] [505] ERROR DeviceEnumerator device_enumerator.cpp:172 Removing media device /dev/media0 while still in use
[0:08:26.292992072] [505] ERROR DeviceEnumerator device_enumerator.cpp:172 Removing media device /dev/media4 while still in use
‚úì Cleanup complete

‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë                  APPLICATION FINISHED                     ‚ïë
‚ï†‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï£
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù

root@raspberrypi4-64:~/workspace# 



---
DAY 2

root@raspberrypi4-64:~/workspace# ./test_wrapper_basic 
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë  RPI Camera Wrapper - Basic Tests     ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù

=== TEST 1: Create & Destroy ===
1.1. Creating camera 640x480 YUV420...
[0:48:20.470798506] [870]  INFO Camera camera_manager.cpp:327 libcamera v0.4.0+dirty (2025-12-07T15:39:35UTC)
[0:48:20.507105835] [871]  WARN RPiSdn sdn.cpp:40 Using legacy SDN tuning - please consider moving SDN inside rpi.denoise
[0:48:20.509403023] [871]  INFO RPI vc4.cpp:401 Registered camera /base/soc/i2c0mux/i2c@1/ov5647@36 to Unicam device /dev/media4 and ISP device /dev/media0
Find camera: /base/soc/i2c0mux/i2c@1/ov5647@36
[INFO]: Camera config validate!
[0:48:20.509936644] [870]  INFO Camera camera.cpp:1202 configuring streams: (0) 640x480-YUV420
[0:48:20.510294824] [871]  INFO RPI vc4.cpp:570 Sensor: /base/soc/i2c0mux/i2c@1/ov5647@36 - Selected sensor format: 640x480-SGBRG10_1X10 - Selected unicam format: 640x480-pGAA
[INFO]: Camera configuration!
[INFO]: Allocate buffers...!

Camera created: 640x480
    ‚úì Camera created successfully
1.2. Destroying camera...
    ‚úì Camera destroyed successfully
1.3. Destroying NULL camera...
    ‚úì NULL destroy handled correctly

=== TEST 2: Start & Stop (Pull Model) ===
[0:48:20.514723129] [870]  INFO Camera camera_manager.cpp:327 libcamera v0.4.0+dirty (2025-12-07T15:39:35UTC)
[0:48:20.553134889] [874]  WARN RPiSdn sdn.cpp:40 Using legacy SDN tuning - please consider moving SDN inside rpi.denoise
[0:48:20.555274302] [874]  INFO RPI vc4.cpp:401 Registered camera /base/soc/i2c0mux/i2c@1/ov5647@36 to Unicam device /dev/media4 and ISP device /dev/media0
Find camera: /base/soc/i2c0mux/i2c@1/ov5647@36
[INFO]: Camera config validate!
[0:48:20.555789868] [870]  INFO Camera camera.cpp:1202 configuring streams: (0) 640x480-YUV420
[0:48:20.556123400] [874]  INFO RPI vc4.cpp:570 Sensor: /base/soc/i2c0mux/i2c@1/ov5647@36 - Selected sensor format: 640x480-SGBRG10_1X10 - Selected unicam format: 640x480-pGAA
[INFO]: Camera configuration!
[INFO]: Allocate buffers...!

Camera created: 640x480
[INFO]: Camera Start...!
[INFO]: Camera started...!
    ‚úì Camera started
    Pulling frames for 3 seconds...
[INFO]: Camera stopped
    ‚úì Camera stopped
    Statistics:
      - Total frames: 10
      - Last sequence: 17
      - Duration: 2901641.46 ms
    ‚úì Frame count OK (>= 60 frames)
    ‚úì Sequence numbers OK

=== TEST 3: Multiple Start/Stop (Pull Model) ===
[0:48:21.686196800] [870]  INFO Camera camera_manager.cpp:327 libcamera v0.4.0+dirty (2025-12-07T15:39:35UTC)
[0:48:21.727619127] [878]  WARN RPiSdn sdn.cpp:40 Using legacy SDN tuning - please consider moving SDN inside rpi.denoise
[0:48:21.729745503] [878]  INFO RPI vc4.cpp:401 Registered camera /base/soc/i2c0mux/i2c@1/ov5647@36 to Unicam device /dev/media4 and ISP device /dev/media0
Find camera: /base/soc/i2c0mux/i2c@1/ov5647@36
[INFO]: Camera config validate!
[0:48:21.730438271] [870]  INFO Camera camera.cpp:1202 configuring streams: (0) 640x480-YUV420
[0:48:21.730873449] [878]  INFO RPI vc4.cpp:570 Sensor: /base/soc/i2c0mux/i2c@1/ov5647@36 - Selected sensor format: 640x480-SGBRG10_1X10 - Selected unicam format: 640x480-pGAA
[INFO]: Camera configuration!
[INFO]: Allocate buffers...!

Camera created: 640x480
3.1. Start/Stop cycle 1...
[INFO]: Camera Start...!
[INFO]: Camera started...!
[INFO]: Camera stopped
    ‚úì Cycle 1: 10 frames captured
3.2. Start/Stop cycle 2...
[INFO]: Camera Start...!
[INFO]: Camera started...!
[INFO]: Camera stopped
    ‚úì Cycle 2: 15 frames captured
3.3. Start/Stop cycle 3...
[INFO]: Camera Start...!
[INFO]: Camera started...!
[INFO]: Camera stopped
    ‚úì Cycle 3: 15 frames captured

=== TEST 4: Error Handling (Pull Model) ===
4.1. Starting NULL camera...
[ERROR]: NULL ptr...!
    ‚úì NULL camera rejected
[0:48:25.098564960] [870]  INFO Camera camera_manager.cpp:327 libcamera v0.4.0+dirty (2025-12-07T15:39:35UTC)
[0:48:25.140784646] [884]  WARN RPiSdn sdn.cpp:40 Using legacy SDN tuning - please consider moving SDN inside rpi.denoise
[0:48:25.142962151] [884]  INFO RPI vc4.cpp:401 Registered camera /base/soc/i2c0mux/i2c@1/ov5647@36 to Unicam device /dev/media4 and ISP device /dev/media0
Find camera: /base/soc/i2c0mux/i2c@1/ov5647@36
[INFO]: Camera config validate!
[0:48:25.143561179] [870]  INFO Camera camera.cpp:1202 configuring streams: (0) 640x480-YUV420
[0:48:25.143939137] [884]  INFO RPI vc4.cpp:570 Sensor: /base/soc/i2c0mux/i2c@1/ov5647@36 - Selected sensor format: 640x480-SGBRG10_1X10 - Selected unicam format: 640x480-pGAA
[INFO]: Camera configuration!
[INFO]: Allocate buffers...!

Camera created: 640x480
4.2. Stopping camera that wasn't started...
[INFO]: Camera has not been running...!
    ‚úì Stop before start handled
4.3. Get frame before start...
    ‚úì Get frame before start rejected
4.4. Double start...
[INFO]: Camera Start...!
[INFO]: Camera started...!
[INFO]: Camera still running...!
    ‚úì Double start handled
[INFO]: Camera stopped

=== TEST 5: Frame Data Validation ===
[0:48:25.262089564] [870]  INFO Camera camera_manager.cpp:327 libcamera v0.4.0+dirty (2025-12-07T15:39:35UTC)
[0:48:25.304453823] [888]  WARN RPiSdn sdn.cpp:40 Using legacy SDN tuning - please consider moving SDN inside rpi.denoise
[0:48:25.306576939] [888]  INFO RPI vc4.cpp:401 Registered camera /base/soc/i2c0mux/i2c@1/ov5647@36 to Unicam device /dev/media4 and ISP device /dev/media0
Find camera: /base/soc/i2c0mux/i2c@1/ov5647@36
[INFO]: Camera config validate!
[0:48:25.307206800] [870]  INFO Camera camera.cpp:1202 configuring streams: (0) 640x480-YUV420
[0:48:25.307571202] [888]  INFO RPI vc4.cpp:570 Sensor: /base/soc/i2c0mux/i2c@1/ov5647@36 - Selected sensor format: 640x480-SGBRG10_1X10 - Selected unicam format: 640x480-pGAA
[INFO]: Camera configuration!
[INFO]: Allocate buffers...!

Camera created: 640x480
[INFO]: Camera Start...!
[INFO]: Camera started...!
    First frame:
      Size: 307200 bytes
      Timestamp: 2905822830000
      Sequence: 8
[INFO]: Camera stopped
    ‚úì Frame validation passed (10 frames)

‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë  ‚úì ALL BASIC TESTS PASSED              ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
root@raspberrypi4-64:~/workspace# 


---
test_wrapper_basic: /home/adonisking/workspace/1.raspi-4/Personal-project/4.user_space_application/2.camera_pi4/test/test_wrapper/test_basic.c:204: test_frame_validation: Assertion frame.size >= expected * 0.9' failed.
Aborted (core dumped)

b·ªã n√†y th√¨ c√≥ v·∫•n ƒë·ªÅ g√¨ kh√¥ng?

C√¢u tr·∫£ l·ªùi ng·∫Øn g·ªçn: c√≥ v·∫•n ƒë·ªÅ th·∫≠t, nh∆∞ng kh√¥ng ph·∫£i camera h·ªèng üòÑ
ƒê√¢y l√† l·ªói logic v·ªÅ ‚Äúframe size‚Äù, r·∫•t hay g·∫∑p khi d√πng YUV420 + libcamera.

M√¨nh gi·∫£i th√≠ch ch√≠nh x√°c v√¨ sao assert n√†y fail, v√† b·∫°n n√™n s·ª≠a test hay s·ª≠a driver.

‚ùå ASSERT FAIL ƒêANG KI·ªÇM TRA C√ÅI G√å?
Assertion `frame.size >= expected * 0.9' failed


Trong test_frame_validation th∆∞·ªùng c√≥ d·∫°ng:

expected = width * height * 3 / 2;   // YUV420


Test ƒëang gi·∫£ ƒë·ªãnh:

buffer ƒë·∫£m b·∫£o ch·ª©a g·∫ßn ƒë·ªß raw YUV420 bytes

üëâ Nh∆∞ng libcamera KH√îNG ƒë·∫£m b·∫£o ƒëi·ªÅu ƒë√≥.

üö® NGUY√äN NH√ÇN TH·ª∞C S·ª∞ (100%)
1Ô∏è‚É£ FrameBuffer ‚â† raw contiguous YUV buffer

Trong libcamera:

FrameBuffer g·ªìm n planes

M·ªói plane c√≥:

stride

offset

length

C√≥ padding / alignment / tiling

‚û°Ô∏è frame.size b·∫°n ƒëang tr·∫£ v·ªÅ th∆∞·ªùng l√†:

‚ùå t·ªïng bytes ƒë√£ map

‚ùå ho·∫∑c size plane[0]

‚ùå ho·∫∑c metadata size

üëâ KH√îNG ph·∫£i raw YUV size

2Ô∏è‚É£ V·ªõi YUV420 tr√™n RPi ISP

V√≠ d·ª• 640√ó480:

Plane	N·ªôi dung	Size th·ª±c
0	Y	stride √ó height
1	UV	stride √ó height / 2

Stride th∆∞·ªùng > width

‚û°Ô∏è T·ªïng bytes:

C√≥ th·ªÉ l·ªõn h∆°n expected

Ho·∫∑c nh·ªè h∆°n expected n·∫øu b·∫°n ch·ªâ c·ªông plane[0]

3Ô∏è‚É£ libcamera cho ph√©p cropping / subsampling

Frame c√≥ th·ªÉ:

crop nh·∫π

scale nh·∫π

alignment padding

‚û°Ô∏è Test d√πng expected * 0.9 v·∫´n kh√¥ng ƒë·ªß an to√†n

üß† V·∫¨Y L·ªñI N·∫∞M ·ªû ƒê√ÇU?
Th√†nh ph·∫ßn	C√≥ l·ªói kh√¥ng
Camera / ISP	‚ùå Kh√¥ng
libcamera	‚ùå Kh√¥ng
Wrapper	‚ö†Ô∏è C√≥ th·ªÉ
Test	‚úÖ Sai gi·∫£ ƒë·ªãnh

‚û°Ô∏è Test ƒëang assume qu√° nhi·ªÅu

‚úÖ C√ÅCH S·ª¨A ƒê√öNG (CH·ªåN 1)
üü¢ C√ÅCH 1 (KHUY·∫æN NGH·ªä): ƒê·ª™NG CHECK frame.size
Thay v√¨:
assert(frame.size >= expected * 0.9);

H√£y check:
assert(frame.width == expected_width);
assert(frame.height == expected_height);
assert(frame.sequence > 0);
assert(frame.timestamp > 0);


üìå ƒê√¢y l√† c√°ch libcamera-apps test

üü¢ C√ÅCH 2: T√çNH SIZE ƒê√öNG T·ª™ PLANE

N·∫øu b·∫°n mu·ªën test d·ªØ li·ªáu th·ª±c s·ª±, th√¨ wrapper ph·∫£i export plane info.

struct ƒë√∫ng
typedef struct {
    void *planes[3];
    size_t plane_size[3];
    uint32_t num_planes;
} rpi_frame_t;

Size th·ª±c:
size_t total = 0;
for (i = 0; i < frame.num_planes; i++)
    total += frame.plane_size[i];

Test:
assert(total >= expected);

üü¢ C√ÅCH 3: N·∫øu v·∫´n mu·ªën d√πng frame.size

üëâ Ch·ªâ d√πng cho RGB / MJPEG

if (format == YUV420)
    SKIP size validation;

‚ùå KH√îNG N√äN L√ÄM

‚ùå Gi·∫£ s·ª≠:

frame.size = width * height * 3 / 2;


‚Üí SAI v·ªõi:

stride

alignment

zero-copy DMA buffer

üß™ T·∫†I SAO TEST 2 OK, TEST 3 FAIL?

Test 3:

start/stop nhi·ªÅu l·∫ßn

buffer reuse

ISP padding thay ƒë·ªïi nh·∫π

Frame size dao ƒë·ªông ‚Üí ƒë·ª•ng ng∆∞·ª°ng 0.9

‚úÖ K·∫æT LU·∫¨N

FAIL N√ÄY KH√îNG PH·∫¢I BUG CAMERA
L√† BUG TEST

‚úî Camera v·∫´n ch·∫°y ƒë√∫ng
‚úî Pipeline OK
‚úî Restart OK

N·∫øu b·∫°n mu·ªën, m√¨nh c√≥ th·ªÉ:

‚ú® Vi·∫øt l·∫°i test_frame_validation() ƒë√∫ng chu·∫©n libcamera

üîç Audit rpi_camera_get_frame() (r·∫•t hay sai)

üì¶ Chu·∫©n h√≥a API frame (zero-copy vs copy)

Ch·ªâ c·∫ßn n√≥i üëç



=======
DAY 3


root@raspberrypi4-64:~/workspace# ./test_wrapper_formats 
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë  RPI Camera - Format Tests             ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù

=== TEST 1: YUV420 Format ===
1.1. Testing YUV420 640x480...
[1:34:42.585617501] [786]  INFO Camera camera_manager.cpp:327 libcamera v0.4.0+dirty (2025-12-07T15:39:35UTC)
[1:34:42.625506264] [787]  WARN RPiSdn sdn.cpp:40 Using legacy SDN tuning - please consider moving SDN inside rpi.denoise
[1:34:42.627738300] [787]  INFO RPI vc4.cpp:401 Registered camera /base/soc/i2c0mux/i2c@1/ov5647@36 to Unicam device /dev/media4 and ISP device /dev/media0
Find camera: /base/soc/i2c0mux/i2c@1/ov5647@36
[INFO]: Camera config validate!
[1:34:42.628276606] [786]  INFO Camera camera.cpp:1202 configuring streams: (0) 640x480-YUV420
[1:34:42.628644914] [787]  INFO RPI vc4.cpp:570 Sensor: /base/soc/i2c0mux/i2c@1/ov5647@36 - Selected sensor format: 640x480-SGBRG10_1X10 - Selected unicam format: 640x480-pGAA
[INFO]: Camera configuration!
[INFO]: Allocate buffers...!

Camera created: 640x480
[INFO]: Camera Start...!
[INFO]: Camera started...!
[INFO]:    Capturing frames for 2 seconds...
[INFO]: Camera stopped
    Statistics:
      - Frames: 21
      - FPS: 0.00
      - Avg size: 460800 bytes
      - Min size: 460800 bytes
      - Max size: 460800 bytes
      - Expected: 460800 bytes
 ‚úì PASSED
1.2. Testing YUV420 1280x720...
[1:34:44.449784685] [786]  INFO Camera camera_manager.cpp:327 libcamera v0.4.0+dirty (2025-12-07T15:39:35UTC)
[1:34:44.491903447] [791]  WARN RPiSdn sdn.cpp:40 Using legacy SDN tuning - please consider moving SDN inside rpi.denoise
[1:34:44.494094854] [791]  INFO RPI vc4.cpp:401 Registered camera /base/soc/i2c0mux/i2c@1/ov5647@36 to Unicam device /dev/media4 and ISP device /dev/media0
Find camera: /base/soc/i2c0mux/i2c@1/ov5647@36
[INFO]: Camera config validate!
[1:34:44.494660270] [786]  INFO Camera camera.cpp:1202 configuring streams: (0) 1280x720-YUV420
[1:34:44.495033671] [791]  INFO RPI vc4.cpp:570 Sensor: /base/soc/i2c0mux/i2c@1/ov5647@36 - Selected sensor format: 1920x1080-SGBRG10_1X10 - Selected unicam format: 1920x1080-pGAA
[INFO]: Camera configuration!
[INFO]: Allocate buffers...!

Camera created: 1280x720
[INFO]: Camera Start...!
[INFO]: Camera started...!
[INFO]:    Capturing frames for 2 seconds...
[INFO]: Camera stopped
    Statistics:
      - Frames: 0
      - FPS: 0.00
      - Avg size: nan bytes
      - Min size: 18446744073709551615 bytes
      - Max size: 0 bytes
      - Expected: 1382400 bytes
 ‚úì PASSED
1.3. Testing YUV420 1920x1080...
[1:34:44.620649008] [786]  INFO Camera camera_manager.cpp:327 libcamera v0.4.0+dirty (2025-12-07T15:39:35UTC)
[1:34:44.663047413] [795]  WARN RPiSdn sdn.cpp:40 Using legacy SDN tuning - please consider moving SDN inside rpi.denoise
[1:34:44.665611777] [795]  INFO RPI vc4.cpp:401 Registered camera /base/soc/i2c0mux/i2c@1/ov5647@36 to Unicam device /dev/media4 and ISP device /dev/media0
Find camera: /base/soc/i2c0mux/i2c@1/ov5647@36
[INFO]: Camera config validate!
[1:34:44.666131527] [786]  INFO Camera camera.cpp:1202 configuring streams: (0) 1920x1080-YUV420
[1:34:44.666498632] [795]  INFO RPI vc4.cpp:570 Sensor: /base/soc/i2c0mux/i2c@1/ov5647@36 - Selected sensor format: 1920x1080-SGBRG10_1X10 - Selected unicam format: 1920x1080-pGAA
[INFO]: Camera configuration!
[INFO]: Allocate buffers...!

Camera created: 1920x1080
[INFO]: Camera Start...!
[INFO]: Camera started...!
[INFO]:    Capturing frames for 2 seconds...
[INFO]: Camera stopped
    Statistics:
      - Frames: 0
      - FPS: 0.00
      - Avg size: nan bytes
      - Min size: 18446744073709551615 bytes
      - Max size: 0 bytes
      - Expected: 3110400 bytes
 ‚úì PASSED

=== TEST 2: RGB888 Format ===
2.1. Testing RGB888 640x480...
[1:34:44.798031108] [786]  INFO Camera camera_manager.cpp:327 libcamera v0.4.0+dirty (2025-12-07T15:39:35UTC)
[1:34:44.839485604] [799]  WARN RPiSdn sdn.cpp:40 Using legacy SDN tuning - please consider moving SDN inside rpi.denoise
[1:34:44.841962358] [799]  INFO RPI vc4.cpp:401 Registered camera /base/soc/i2c0mux/i2c@1/ov5647@36 to Unicam device /dev/media4 and ISP device /dev/media0
Find camera: /base/soc/i2c0mux/i2c@1/ov5647@36
[INFO]: Camera config validate!
[1:34:44.842559978] [786]  INFO Camera camera.cpp:1202 configuring streams: (0) 640x480-RGB888
[1:34:44.842912398] [799]  INFO RPI vc4.cpp:570 Sensor: /base/soc/i2c0mux/i2c@1/ov5647@36 - Selected sensor format: 640x480-SGBRG10_1X10 - Selected unicam format: 640x480-pGAA
[INFO]: Camera configuration!
[INFO]: Allocate buffers...!

Camera created: 640x480
[INFO]: Camera Start...!
[INFO]: Camera started...!
[INFO]:    Capturing frames for 2 seconds...
[INFO]: Camera stopped
    Statistics:
      - Frames: 0
      - FPS: 0.00
      - Avg size: nan bytes
      - Min size: 18446744073709551615 bytes
      - Max size: 0 bytes
      - Expected: 921600 bytes
 ‚úì PASSED
2.2. Testing RGB888 1280x720...
[1:34:44.958535534] [786]  INFO Camera camera_manager.cpp:327 libcamera v0.4.0+dirty (2025-12-07T15:39:35UTC)
[1:34:44.999984882] [803]  WARN RPiSdn sdn.cpp:40 Using legacy SDN tuning - please consider moving SDN inside rpi.denoise
[1:34:45.002540690] [803]  INFO RPI vc4.cpp:401 Registered camera /base/soc/i2c0mux/i2c@1/ov5647@36 to Unicam device /dev/media4 and ISP device /dev/media0
Find camera: /base/soc/i2c0mux/i2c@1/ov5647@36
[INFO]: Camera config validate!
[1:34:45.003169569] [786]  INFO Camera camera.cpp:1202 configuring streams: (0) 1280x720-RGB888
[1:34:45.003550858] [803]  INFO RPI vc4.cpp:570 Sensor: /base/soc/i2c0mux/i2c@1/ov5647@36 - Selected sensor format: 1920x1080-SGBRG10_1X10 - Selected unicam format: 1920x1080-pGAA
[INFO]: Camera configuration!
[INFO]: Allocate buffers...!

Camera created: 1280x720
[INFO]: Camera Start...!
[INFO]: Camera started...!
[INFO]:    Capturing frames for 2 seconds...
[INFO]: Camera stopped
    Statistics:
      - Frames: 0
      - FPS: 0.00
      - Avg size: nan bytes
      - Min size: 18446744073709551615 bytes
      - Max size: 0 bytes
      - Expected: 2764800 bytes
 ‚úì PASSED
2.3. Testing RGB888 1920x1080...
[1:34:45.135011762] [786]  INFO Camera camera_manager.cpp:327 libcamera v0.4.0+dirty (2025-12-07T15:39:35UTC)
[1:34:45.174340387] [807]  WARN RPiSdn sdn.cpp:40 Using legacy SDN tuning - please consider moving SDN inside rpi.denoise
[1:34:45.176491850] [807]  INFO RPI vc4.cpp:401 Registered camera /base/soc/i2c0mux/i2c@1/ov5647@36 to Unicam device /dev/media4 and ISP device /dev/media0
Find camera: /base/soc/i2c0mux/i2c@1/ov5647@36
[INFO]: Camera config validate!
[1:34:45.177109469] [786]  INFO Camera camera.cpp:1202 configuring streams: (0) 1920x1080-RGB888
[1:34:45.177479574] [807]  INFO RPI vc4.cpp:570 Sensor: /base/soc/i2c0mux/i2c@1/ov5647@36 - Selected sensor format: 1920x1080-SGBRG10_1X10 - Selected unicam format: 1920x1080-pGAA
[INFO]: Camera configuration!
[INFO]: Allocate buffers...!

Camera created: 1920x1080
[INFO]: Camera Start...!
[INFO]: Camera started...!
[INFO]:    Capturing frames for 2 seconds...
[INFO]: Camera stopped
    Statistics:
      - Frames: 0
      - FPS: 0.00
      - Avg size: nan bytes
      - Min size: 18446744073709551615 bytes
      - Max size: 0 bytes
      - Expected: 6220800 bytes
 ‚úì PASSED

=== TEST 3: MJPEG Format ===
3.1. Testing MJPEG 640x480...
[1:34:45.320207785] [786]  INFO Camera camera_manager.cpp:327 libcamera v0.4.0+dirty (2025-12-07T15:39:35UTC)
[1:34:45.359333524] [811]  WARN RPiSdn sdn.cpp:40 Using legacy SDN tuning - please consider moving SDN inside rpi.denoise
[1:34:45.361677299] [811]  INFO RPI vc4.cpp:401 Registered camera /base/soc/i2c0mux/i2c@1/ov5647@36 to Unicam device /dev/media4 and ISP device /dev/media0
Find camera: /base/soc/i2c0mux/i2c@1/ov5647@36
[INFO]: Camera configuration adjusted by libcamera!
[1:34:45.362273900] [786]  INFO Camera camera.cpp:1202 configuring streams: (0) 640x480-YUYV
[1:34:45.362647653] [811]  INFO RPI vc4.cpp:570 Sensor: /base/soc/i2c0mux/i2c@1/ov5647@36 - Selected sensor format: 640x480-SGBRG10_1X10 - Selected unicam format: 640x480-pGAA
[INFO]: Camera configuration!
[INFO]: Allocate buffers...!

Camera created: 640x480
[INFO]: Camera Start...!
[INFO]: Camera started...!
[INFO]:    Capturing frames for 2 seconds...
[INFO]: Camera stopped
    Statistics:
      - Frames: 0
      - FPS: 0.00
      - Avg size: nan bytes
      - Min size: 18446744073709551615 bytes
      - Max size: 0 bytes
      - Expected: 10000 bytes
 ‚úì PASSED
3.2. Testing MJPEG 1280x720...
[1:34:45.478042553] [786]  INFO Camera camera_manager.cpp:327 libcamera v0.4.0+dirty (2025-12-07T15:39:35UTC)
[1:34:45.521495626] [815]  WARN RPiSdn sdn.cpp:40 Using legacy SDN tuning - please consider moving SDN inside rpi.denoise
[1:34:45.523587294] [815]  INFO RPI vc4.cpp:401 Registered camera /base/soc/i2c0mux/i2c@1/ov5647@36 to Unicam device /dev/media4 and ISP device /dev/media0
Find camera: /base/soc/i2c0mux/i2c@1/ov5647@36
[INFO]: Camera configuration adjusted by libcamera!
[1:34:45.524248394] [786]  INFO Camera camera.cpp:1202 configuring streams: (0) 1280x720-YUYV
[1:34:45.524633128] [815]  INFO RPI vc4.cpp:570 Sensor: /base/soc/i2c0mux/i2c@1/ov5647@36 - Selected sensor format: 1920x1080-SGBRG10_1X10 - Selected unicam format: 1920x1080-pGAA
[INFO]: Camera configuration!
[INFO]: Allocate buffers...!

Camera created: 1280x720
[INFO]: Camera Start...!
[INFO]: Camera started...!
[INFO]:    Capturing frames for 2 seconds...
[INFO]: Camera stopped
    Statistics:
      - Frames: 0
      - FPS: 0.00
      - Avg size: nan bytes
      - Min size: 18446744073709551615 bytes
      - Max size: 0 bytes
      - Expected: 20000 bytes
 ‚úì PASSED
3.3. Testing MJPEG 1920x1080...
[1:34:45.650480275] [786]  INFO Camera camera_manager.cpp:327 libcamera v0.4.0+dirty (2025-12-07T15:39:35UTC)
[1:34:45.693463819] [819]  WARN RPiSdn sdn.cpp:40 Using legacy SDN tuning - please consider moving SDN inside rpi.denoise
[1:34:45.695561154] [819]  INFO RPI vc4.cpp:401 Registered camera /base/soc/i2c0mux/i2c@1/ov5647@36 to Unicam device /dev/media4 and ISP device /dev/media0
Find camera: /base/soc/i2c0mux/i2c@1/ov5647@36
[INFO]: Camera configuration adjusted by libcamera!
[1:34:45.696243698] [786]  INFO Camera camera.cpp:1202 configuring streams: (0) 1920x1080-YUYV
[1:34:45.696635395] [819]  INFO RPI vc4.cpp:570 Sensor: /base/soc/i2c0mux/i2c@1/ov5647@36 - Selected sensor format: 1920x1080-SGBRG10_1X10 - Selected unicam format: 1920x1080-pGAA
[INFO]: Camera configuration!
[INFO]: Allocate buffers...!

Camera created: 1920x1080
[INFO]: Camera Start...!
[INFO]: Camera started...!
[INFO]:    Capturing frames for 2 seconds...
[INFO]: Camera stopped
    Statistics:
      - Frames: 0
      - FPS: 0.00
      - Avg size: nan bytes
      - Min size: 18446744073709551615 bytes
      - Max size: 0 bytes
      - Expected: 30000 bytes
 ‚úì PASSED

=== TEST 4: Resolution Limits ===
4.1. Testing minimum resolution (320x240)...
[1:34:45.829470349] [786]  INFO Camera camera_manager.cpp:327 libcamera v0.4.0+dirty (2025-12-07T15:39:35UTC)
[1:34:45.868442720] [823]  WARN RPiSdn sdn.cpp:40 Using legacy SDN tuning - please consider moving SDN inside rpi.denoise
[1:34:45.870542870] [823]  INFO RPI vc4.cpp:401 Registered camera /base/soc/i2c0mux/i2c@1/ov5647@36 to Unicam device /dev/media4 and ISP device /dev/media0
Find camera: /base/soc/i2c0mux/i2c@1/ov5647@36
[INFO]: Camera config validate!
[1:34:45.871136656] [786]  INFO Camera camera.cpp:1202 configuring streams: (0) 320x240-YUV420
[1:34:45.871513353] [823]  INFO RPI vc4.cpp:570 Sensor: /base/soc/i2c0mux/i2c@1/ov5647@36 - Selected sensor format: 640x480-SGBRG10_1X10 - Selected unicam format: 640x480-pGAA
[INFO]: Camera configuration!
[INFO]: Allocate buffers...!

Camera created: 320x240
[INFO]: Camera Start...!
[INFO]: Camera started...!
[INFO]:    Capturing frames for 2 seconds...
[INFO]: Camera stopped
    ‚úì Min resolution works: 0 frames
 ‚úì PASSED
4.2. Testing high resolution (2592x1944)...
[1:34:45.985290744] [786]  INFO Camera camera_manager.cpp:327 libcamera v0.4.0+dirty (2025-12-07T15:39:35UTC)
[1:34:46.027477616] [827]  WARN RPiSdn sdn.cpp:40 Using legacy SDN tuning - please consider moving SDN inside rpi.denoise
[1:34:46.030010110] [827]  INFO RPI vc4.cpp:401 Registered camera /base/soc/i2c0mux/i2c@1/ov5647@36 to Unicam device /dev/media4 and ISP device /dev/media0
Find camera: /base/soc/i2c0mux/i2c@1/ov5647@36
[INFO]: Camera config validate!
[1:34:46.030660321] [786]  INFO Camera camera.cpp:1202 configuring streams: (0) 2592x1944-YUV420
[1:34:46.031024482] [827]  INFO RPI vc4.cpp:570 Sensor: /base/soc/i2c0mux/i2c@1/ov5647@36 - Selected sensor format: 2592x1944-SGBRG10_1X10 - Selected unicam format: 2592x1944-pGAA
[INFO]: Camera configuration!
[INFO]: Allocate buffers...!

Camera created: 2592x1944
[INFO]: Camera Start...!
[INFO]: Camera started...!
[INFO]: Camera stopped
    ‚úì High resolution works: 0 frames
 ‚úì PASSED

=== TEST 5: Format Switching ===
5.1. Testing YUV420 format...
[1:34:46.184348660] [786]  INFO Camera camera_manager.cpp:327 libcamera v0.4.0+dirty (2025-12-07T15:39:35UTC)
[1:34:46.223958780] [831]  WARN RPiSdn sdn.cpp:40 Using legacy SDN tuning - please consider moving SDN inside rpi.denoise
[1:34:46.226532421] [831]  INFO RPI vc4.cpp:401 Registered camera /base/soc/i2c0mux/i2c@1/ov5647@36 to Unicam device /dev/media4 and ISP device /dev/media0
Find camera: /base/soc/i2c0mux/i2c@1/ov5647@36
[INFO]: Camera config validate!
[1:34:46.227121763] [786]  INFO Camera camera.cpp:1202 configuring streams: (0) 640x480-YUV420
[1:34:46.227468461] [831]  INFO RPI vc4.cpp:570 Sensor: /base/soc/i2c0mux/i2c@1/ov5647@36 - Selected sensor format: 640x480-SGBRG10_1X10 - Selected unicam format: 640x480-pGAA
[INFO]: Camera configuration!
[INFO]: Allocate buffers...!

Camera created: 640x480
[INFO]: Camera Start...!
[INFO]: Camera started...!
[INFO]:    Capturing frames for 2 seconds...
[INFO]: Camera stopped
    ‚úì YUV420: 0 frames captured
5.2. Testing RGB888 format...
[1:34:46.342837084] [786]  INFO Camera camera_manager.cpp:327 libcamera v0.4.0+dirty (2025-12-07T15:39:35UTC)
[1:34:46.383977678] [835]  WARN RPiSdn sdn.cpp:40 Using legacy SDN tuning - please consider moving SDN inside rpi.denoise
[1:34:46.386803407] [835]  INFO RPI vc4.cpp:401 Registered camera /base/soc/i2c0mux/i2c@1/ov5647@36 to Unicam device /dev/media4 and ISP device /dev/media0
Find camera: /base/soc/i2c0mux/i2c@1/ov5647@36
[INFO]: Camera config validate!
[1:34:46.387397490] [786]  INFO Camera camera.cpp:1202 configuring streams: (0) 640x480-RGB888
[1:34:46.387749465] [835]  INFO RPI vc4.cpp:570 Sensor: /base/soc/i2c0mux/i2c@1/ov5647@36 - Selected sensor format: 640x480-SGBRG10_1X10 - Selected unicam format: 640x480-pGAA
[INFO]: Camera configuration!
[INFO]: Allocate buffers...!

Camera created: 640x480
[INFO]: Camera Start...!
[INFO]: Camera started...!
[INFO]:    Capturing frames for 2 seconds...
[INFO]: Camera stopped
    ‚úì RGB888: 0 frames captured
5.3. Testing MJPEG format...
[1:34:46.505821264] [786]  INFO Camera camera_manager.cpp:327 libcamera v0.4.0+dirty (2025-12-07T15:39:35UTC)
[1:34:46.548695643] [839]  WARN RPiSdn sdn.cpp:40 Using legacy SDN tuning - please consider moving SDN inside rpi.denoise
[1:34:46.550866402] [839]  INFO RPI vc4.cpp:401 Registered camera /base/soc/i2c0mux/i2c@1/ov5647@36 to Unicam device /dev/media4 and ISP device /dev/media0
Find camera: /base/soc/i2c0mux/i2c@1/ov5647@36
[INFO]: Camera configuration adjusted by libcamera!
[1:34:46.551457244] [786]  INFO Camera camera.cpp:1202 configuring streams: (0) 640x480-YUYV
[1:34:46.551832479] [839]  INFO RPI vc4.cpp:570 Sensor: /base/soc/i2c0mux/i2c@1/ov5647@36 - Selected sensor format: 640x480-SGBRG10_1X10 - Selected unicam format: 640x480-pGAA
[INFO]: Camera configuration!
[INFO]: Allocate buffers...!

Camera created: 640x480
[INFO]: Camera Start...!
[INFO]: Camera started...!
[INFO]:    Capturing frames for 2 seconds...
[INFO]: Camera stopped
    ‚úì MJPEG: 26 frames captured
    ‚úì All formats work independently
 ‚úì PASSED

‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë  ‚úì ALL FORMAT TESTS PASSED             ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
